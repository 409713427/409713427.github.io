<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>bug</title>
      <link href="/2022/031855064.html"/>
      <url>/2022/031855064.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="maven出现：Failed-to-execute-goal-on-project-…-Could-not-resolve-dependencies-for-project-…"><a href="#maven出现：Failed-to-execute-goal-on-project-…-Could-not-resolve-dependencies-for-project-…" class="headerlink" title="maven出现：Failed to execute goal on project …: Could not resolve dependencies for project …"></a>maven出现：Failed to execute goal on project …: Could not resolve dependencies for project …</h1><p>1、我的项目结构是一个父项目，多个子项目目录如下：</p><p><a href="https://imgtu.com/i/qFsTB9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2022/03/18/qFsTB9.png" alt="qFsTB9.png"></a></p><p>2、我这里就举个例子，所以应用的也就是common和order-add这个项目。</p><p>3、两个项目都继承父项目</p><p>4、在模块中order-add依赖于common，在common中执行完clean和install之后，本地仓库也存在依赖，但是在order-add中进行install就会出现</p><pre><code>Failed to execute goal on project ...: Could not resolve dependencies for project ...</code></pre><p>这样测错误，最后发现原来是自己没有首先对父项目也就是springcloud-demo1项目进行clean和install ，</p><p>5、总结、在父项目下有的子项目在首次运行clean 和install前应该先运行父项目的clean和install</p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SASS用法指南</title>
      <link href="/2022/022448561.html"/>
      <url>/2022/022448561.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="SASS用法指南"><a href="#SASS用法指南" class="headerlink" title="SASS用法指南"></a>SASS用法指南</h1><h2 id="一、什么是SASS"><a href="#一、什么是SASS" class="headerlink" title="一、什么是SASS"></a><strong>一、什么是SASS</strong></h2><p><a href="http://sass-lang.com/" target="_blank" rel="noopener">SASS</a>是一种CSS的开发工具，提供了许多便利的写法，大大节省了设计者的时间，使得CSS的开发，变得简单和可维护。</p><p>本文总结了SASS的主要用法。</p><h2 id="二、基本用法"><a href="#二、基本用法" class="headerlink" title="二、基本用法"></a>二、<strong>基本用法</strong></h2><h4 id="2-1-变量"><a href="#2-1-变量" class="headerlink" title="2.1 变量"></a>2.1 变量</h4><p>SASS允许使用变量，所有变量以$开头。</p><pre class=" language-less"><code class="language-less">$<span class="token property">blue</span> <span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token selector">div</span><span class="token punctuation">{</span>    <span class="token property">color</span> <span class="token punctuation">:</span> $blue<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>如果变量需要镶嵌在字符串值中,就必须写在<code>#{}</code>之中</p><pre class=" language-less"><code class="language-less">$<span class="token property">side</span> <span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token selector">.rounded</span> <span class="token punctuation">{</span>    <span class="token selector">border-#</span><span class="token punctuation">{</span>$side<span class="token punctuation">}</span><span class="token property">_radius</span><span class="token punctuation">:</span> <span class="token number">5</span>px<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="2-2计算功能"><a href="#2-2计算功能" class="headerlink" title="2.2计算功能"></a>2.2计算功能</h4><p>SASS允许在代码中使用算数运算:</p><pre class=" language-less"><code class="language-less"><span class="token selector">body</span> <span class="token punctuation">{</span>    <span class="token property">margin</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">14</span>px<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token operator">+</span><span class="token number">100</span>px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> $var <span class="token operator">*</span> <span class="token number">10%</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="3-3嵌套"><a href="#3-3嵌套" class="headerlink" title="3.3嵌套"></a>3.3嵌套</h4><p>SASS允许选择器嵌套.</p><pre class=" language-less"><code class="language-less"><span class="token selector">div h1</span><span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>可以写成</p><pre class=" language-less"><code class="language-less"><span class="token selector">div</span><span class="token punctuation">{</span>    <span class="token selector">h1</span><span class="token punctuation">{</span>        <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>属性也可以嵌套,比如border-color属性,可以写成:</p><pre class=" language-less"><code class="language-less"><span class="token selector">p</span><span class="token punctuation">{</span>    <span class="token selector">border</span><span class="token punctuation">{</span>        <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>注意,border后面必须加上冒号.</p><p>在嵌套的代码块内,可以使用&amp;引用父元素.比如<code>a:hover</code>伪类选择器,可以写成:</p><pre class=" language-less"><code class="language-less"><span class="token selector">a</span><span class="token punctuation">{</span>    <span class="token selector">&amp;:hover</span><span class="token punctuation">{</span>        <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="2-4注释"><a href="#2-4注释" class="headerlink" title="2.4注释"></a>2.4注释</h4><p>SASS共有两种注释风格</p><p>标准的<code>css</code>注释 /* comment */,会保留到编译后的文件</p><p>单行注释 // comment ,只保留在SASS源文件中,编译后被省略.</p><p>在/*后面加一个感叹号,表示这是<code>重要注释</code>.即使是压缩模式编译,也会保留这行注释,通常可以用于声明版权信息</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/*!    重要注释!*/</span></code></pre><h2 id="三、代码的重用"><a href="#三、代码的重用" class="headerlink" title="三、代码的重用"></a><strong>三、代码的重用</strong></h2><h4 id="3-1继承"><a href="#3-1继承" class="headerlink" title="3.1继承"></a>3.1继承</h4><p>SASS允许一个选择器继承另一个选择器,比如:</p><p>class1</p><pre class=" language-less"><code class="language-less"><span class="token selector">.class1</span><span class="token punctuation">{</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#ddd</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>class2要继承class1,就要使用@extend命令</p><pre class=" language-less"><code class="language-less"><span class="token selector">.class</span><span class="token punctuation">{</span>    <span class="token variable">@extend</span> <span class="token number">.</span>class<span class="token number">1</span><span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token number">120%</span><span class="token punctuation">}</span></code></pre><h4 id="3-2-Mixin"><a href="#3-2-Mixin" class="headerlink" title="3.2 Mixin"></a>3.2 Mixin</h4><p>Mixin是可以重用的代码块</p><p>使用@mixin命令,定义一个代码块</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@mixin left</span><span class="token punctuation">{</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>使用 @include命令,调用这个mixin</p><pre class=" language-less"><code class="language-less"><span class="token selector">div</span><span class="token punctuation">{</span>    <span class="token variable">@include</span> left<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>mixin的强大之处,在于可以指定参数和缺省值</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@mixin left<span class="token punctuation">(</span>$value<span class="token punctuation">:</span> 10px<span class="token punctuation">)</span></span><span class="token punctuation">{</span>    <span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span>    <span class="token property">margin-right</span><span class="token punctuation">:</span> $value<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>使用的时候根据需要加入参数:</p><pre class=" language-less"><code class="language-less"><span class="token selector">div</span><span class="token punctuation">{</span>    <span class="token variable">@include</span> <span class="token function">left</span><span class="token punctuation">(</span><span class="token number">20</span>px<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span></code></pre><p>下面是一个mixin的实力,用来生成浏览器前缀</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@mixin rounded<span class="token punctuation">(</span>$vert, $horz, $radius<span class="token punctuation">:</span> 10px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>　　　　<span class="token selector">border-#</span><span class="token punctuation">{</span>$vert<span class="token punctuation">}</span><span class="token selector">-#</span><span class="token punctuation">{</span>$horz<span class="token punctuation">}</span><span class="token property">-radius</span><span class="token punctuation">:</span> $radius<span class="token punctuation">;</span>　　　　<span class="token selector">-moz-border-radius-#</span><span class="token punctuation">{</span>$vert<span class="token punctuation">}</span><span class="token selector">#</span><span class="token punctuation">{</span>$horz<span class="token punctuation">}</span><span class="token punctuation">:</span> $radius<span class="token punctuation">;</span>　　　　<span class="token selector">-webkit-border-#</span><span class="token punctuation">{</span>$vert<span class="token punctuation">}</span><span class="token selector">-#</span><span class="token punctuation">{</span>$horz<span class="token punctuation">}</span><span class="token property">-radius</span><span class="token punctuation">:</span> $radius<span class="token punctuation">;</span>　　<span class="token punctuation">}</span></code></pre><p>使用的时候,可以像下面这样调用</p><pre class=" language-less"><code class="language-less">　<span class="token selector">#navbar li</span> <span class="token punctuation">{</span> <span class="token variable">@include</span> <span class="token function">rounded</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> left<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>　<span class="token selector">#footer</span> <span class="token punctuation">{</span> <span class="token variable">@include</span> <span class="token function">rounded</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> left<span class="token punctuation">,</span> <span class="token number">5</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><h4 id="3-3-颜色函数"><a href="#3-3-颜色函数" class="headerlink" title="3.3 颜色函数"></a>3.3 颜色函数</h4><p>SASS提供了一些内置的颜色函数,以便生成系列颜色</p><pre class=" language-less"><code class="language-less"><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token hexcode">#cc3</span><span class="token punctuation">,</span> <span class="token number">10%</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// #d6d65c</span><span class="token function">darken</span><span class="token punctuation">(</span><span class="token hexcode">#cc3</span><span class="token punctuation">,</span> <span class="token number">10%</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// #a3a329</span><span class="token function">grayscale</span><span class="token punctuation">(</span><span class="token hexcode">#cc3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// #808080</span><span class="token function">complement</span><span class="token punctuation">(</span><span class="token hexcode">#cc3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// #33c</span></code></pre><h4 id="4-4-插入文件"><a href="#4-4-插入文件" class="headerlink" title="4.4 插入文件"></a>4.4 插入文件</h4><p>@import命令，用来插入外部文件。</p><pre class=" language-less"><code class="language-less"><span class="token variable">@import</span> <span class="token string">"path/filename.scss"</span></code></pre><p>如果插入的是.css文件,则等同于css的import命令</p><pre class=" language-less"><code class="language-less"><span class="token variable">@import</span> <span class="token string">"foo.css"</span></code></pre><h2 id="五、高级用法"><a href="#五、高级用法" class="headerlink" title="五、高级用法"></a><strong>五、高级用法</strong></h2><p>4.1 条件语句</p><p>@if可以用来判断</p><pre class=" language-less"><code class="language-less"><span class="token selector">p</span><span class="token punctuation">{</span>    <span class="token atrule">@if 1+1 == 2</span> <span class="token punctuation">{</span><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token atrule">@if 5&lt;3</span> <span class="token punctuation">{</span> <span class="token property">border</span> <span class="token punctuation">:</span> <span class="token number">2</span>px dotted<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>配套的还有@else命令:</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@if lightness<span class="token punctuation">(</span>$color<span class="token punctuation">)</span> > 30%</span> <span class="token punctuation">{</span>　　<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#000</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token atrule">@else</span> <span class="token punctuation">{</span>　　<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="4-2-循环语句"><a href="#4-2-循环语句" class="headerlink" title="4.2 循环语句"></a>4.2 循环语句</h4><p>SASS支持for循环:</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@for $i from 1 to 10</span> <span class="token punctuation">{</span>　　<span class="token selector">.border-#</span><span class="token punctuation">{</span>$i<span class="token punctuation">}</span> <span class="token punctuation">{</span>　　　　<span class="token selector">border: #</span><span class="token punctuation">{</span>$i<span class="token punctuation">}</span>px solid blue<span class="token punctuation">;</span>　　<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>也支持while循环:</p><pre class=" language-less"><code class="language-less">　$<span class="token property">i</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">;</span>　<span class="token atrule">@while $i > 0</span> <span class="token punctuation">{</span>　　　<span class="token selector">.item-#</span><span class="token punctuation">{</span>$i<span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">2</span>em <span class="token operator">*</span> $i<span class="token punctuation">;</span> <span class="token punctuation">}</span>　　　$<span class="token property">i</span><span class="token punctuation">:</span> $i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>　<span class="token punctuation">}</span></code></pre><p>each命令，作用与for类似：</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@each $member in a, b, c, d</span> <span class="token punctuation">{</span>　　<span class="token selector">.#</span><span class="token punctuation">{</span>$member<span class="token punctuation">}</span> <span class="token punctuation">{</span>　　　　<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url("/image/#{$member}.jpg")</span><span class="token punctuation">;</span>　　<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="4-3自定义函数"><a href="#4-3自定义函数" class="headerlink" title="4.3自定义函数"></a>4.3自定义函数</h4><p>SASS允许用户编写自己的函数</p><pre class=" language-less"><code class="language-less"><span class="token atrule">@function double<span class="token punctuation">(</span>$n<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>　　<span class="token variable">@return</span> $n <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#sidebar</span> <span class="token punctuation">{</span>　　<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token number">5</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高级检索,导入/导出EXCEL,mysql查询年度数据</title>
      <link href="/2022/02214512.html"/>
      <url>/2022/02214512.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="智信微应用-环保地图模块开发"><a href="#智信微应用-环保地图模块开发" class="headerlink" title="智信微应用-环保地图模块开发:"></a>智信微应用-环保地图模块开发:</h1><h2 id="这里记录一下之前没写过的功能"><a href="#这里记录一下之前没写过的功能" class="headerlink" title="这里记录一下之前没写过的功能"></a>这里记录一下之前没写过的功能</h2><ol><li><h3 id="高级检索"><a href="#高级检索" class="headerlink" title="高级检索"></a>高级检索</h3></li></ol><p><code>SearchVO</code></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @ProjectName: zx-xinwenmine-security * @Package: com.zgiot.sf.security.vo * @ClassName: SearchVO * @Author: 汪帅瞳 * @Description: 主要用于高级检索 一个searchvo对象就代表一个检索条件 * @Date: 2021/12/22 17:10 * @Version: 2.0 */</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@ToString</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SearchVO</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String key<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//字段名</span>    <span class="token keyword">private</span> String value<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//字段值</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> like<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//模糊或精准</span>    <span class="token keyword">private</span> String  equals<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//等于或者不等于</span>    <span class="token keyword">private</span> String and<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//是与非</span>    <span class="token keyword">private</span> Integer order<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//条件顺序</span><span class="token punctuation">}</span></code></pre><p><code>controller</code></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"高级检索"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"AdvancedSearch"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ResponseMessage <span class="token function">selectAdvancedRiskInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pageNum"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> pageNum<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pageSize"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"10"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestBody</span> List<span class="token operator">&lt;</span>SearchVO<span class="token operator">></span> lists<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span><span class="token punctuation">;</span>        lists<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>Comparator<span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span>SearchVO<span class="token operator">:</span><span class="token operator">:</span>getOrder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span><span class="token punctuation">;</span>        IPage<span class="token operator">&lt;</span>RistDetailAndRistTypeVO<span class="token operator">></span> result <span class="token operator">=</span> riskDetailService<span class="token punctuation">.</span><span class="token function">selectAdvancedRiskInfo</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> lists<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"200"</span><span class="token punctuation">,</span> <span class="token string">"查询成功"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>serviceImpl</code></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * @Method 高级检索     * @Author wst     * @Date 2022/2/23 9:29     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> IPage<span class="token operator">&lt;</span>RistDetailAndRistTypeVO<span class="token operator">></span> <span class="token function">selectAdvancedRiskInfo</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageNum<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>SearchVO<span class="token operator">></span> lists<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String key <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//字段名</span>        String value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//字段值</span>        <span class="token keyword">boolean</span> like<span class="token punctuation">;</span>               <span class="token comment" spellcheck="true">//模糊或精准</span>        <span class="token keyword">boolean</span> equal<span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">//等于或不等于</span>        String and <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//是与非   or  and   null/""</span>        String pre <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//存储和上一步的关系     or/and/""</span>        String condition <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//拼接sql语句   保持前后空格</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> riskDetails<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                SearchVO searchVO <span class="token operator">=</span> riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                key <span class="token operator">=</span> searchVO<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                value <span class="token operator">=</span> searchVO<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                and <span class="token operator">=</span> searchVO<span class="token punctuation">.</span><span class="token function">getAnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                like <span class="token operator">=</span> searchVO<span class="token punctuation">.</span><span class="token function">isLike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                equal <span class="token operator">=</span> searchVO<span class="token punctuation">.</span><span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token comment" spellcheck="true">//拼sql</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//当前是第一个条件 如果下一个条件的字段名与当前要查的相当 并且之间的关系是 or 需要加'('</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> riskDetails<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"or"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>and<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span>                            <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> <span class="token string">" ( "</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    condition <span class="token operator">+=</span> key<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>like<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//模糊</span>                        condition <span class="token operator">+=</span> <span class="token string">" like '%"</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">"%' "</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//精准</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>equal<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token comment" spellcheck="true">//等于</span>                            condition <span class="token operator">+=</span> <span class="token string">" = "</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                            <span class="token comment" spellcheck="true">//不等于</span>                            condition <span class="token operator">+=</span> <span class="token string">" != "</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        condition <span class="token operator">+=</span> <span class="token string">" '"</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">"' "</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token comment" spellcheck="true">//如果与下一个条件之间有连接关系</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>null <span class="token operator">==</span> and <span class="token operator">||</span> and<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> and <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>                        pre <span class="token operator">=</span> and<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// pre里面包含了上一个的关系</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"or"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> riskDetails<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"or"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                               key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                            condition <span class="token operator">+=</span> <span class="token string">" ( "</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> null <span class="token operator">||</span> key<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> <span class="token string">" 1 = 1 "</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> key<span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>like<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            condition <span class="token operator">+=</span> <span class="token string">" like '%"</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">"%' "</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span>equal<span class="token punctuation">)</span> <span class="token punctuation">{</span>                                condition <span class="token operator">+=</span> <span class="token string">" = "</span><span class="token punctuation">;</span>                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                                condition <span class="token operator">+=</span> <span class="token string">" != "</span><span class="token punctuation">;</span>                            <span class="token punctuation">}</span>                            condition <span class="token operator">+=</span> <span class="token string">" '"</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">"' "</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"or"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> <span class="token string">")"</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>null <span class="token operator">==</span> and <span class="token operator">||</span> and<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        condition <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> and <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>                        pre <span class="token operator">=</span> and<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>         <span class="token punctuation">}</span>        <span class="token punctuation">}</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 没有匹配到条件   默认查询所有</span>            List<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> riskDetailList <span class="token operator">=</span> riskDetailMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> riskDetailList<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//数据库操作</span>        List<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> riskDetail <span class="token operator">=</span> riskDetailMapper<span class="token punctuation">.</span><span class="token function">selectRiskDetail</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> riskDetail<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="2"><li><h3 id="导入excel"><a href="#导入excel" class="headerlink" title="导入excel"></a>导入excel</h3></li></ol><p><code>fileUtil</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zgiot<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>security<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token keyword">import</span> cn<span class="token punctuation">.</span>afterturn<span class="token punctuation">.</span>easypoi<span class="token punctuation">.</span>excel<span class="token punctuation">.</span>ExcelExportUtil<span class="token punctuation">;</span><span class="token keyword">import</span> cn<span class="token punctuation">.</span>afterturn<span class="token punctuation">.</span>easypoi<span class="token punctuation">.</span>excel<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>ExportParams<span class="token punctuation">;</span><span class="token keyword">import</span> cn<span class="token punctuation">.</span>afterturn<span class="token punctuation">.</span>easypoi<span class="token punctuation">.</span>excel<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>params<span class="token punctuation">.</span>ExcelExportEntity<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zgiot<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>security<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>RiskType<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>hssf<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>HSSFWorkbook<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>ss<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>Cell<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>ss<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>Row<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>ss<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>Sheet<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>ss<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>Workbook<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>xssf<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>SXSSFSheet<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>xssf<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>SXSSFWorkbook<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>xssf<span class="token punctuation">.</span>usermodel<span class="token punctuation">.</span>XSSFWorkbook<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletResponse<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>UnsupportedEncodingException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @ProjectName: zx-xinwenmine-security * @Package: com.zgiot.sf.security.utils * @ClassName: FileUtils * @Author: 40971 * @Description: 用于给一切上传下载文件提供公共方法 * @Date: 2022/2/21 13:24 * @Version: 2.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUtils</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 判断文件格式     * @param inStr     * @param fileName     * @return     * @throws Exception     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Workbook <span class="token function">getWorkbook</span><span class="token punctuation">(</span>InputStream inStr<span class="token punctuation">,</span> String fileName<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Workbook workbook <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"xlsx"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XSSFWorkbook</span><span class="token punctuation">(</span>inStr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"xls"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HSSFWorkbook</span><span class="token punctuation">(</span>inStr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"请上传excel文件！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> workbook<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * @Method 导出excel数据 (单模板或带数据)     * @Author 40971     * @Param HttpServletResponse response,     * @Param String fileName,文件名     * @Param List&lt;String> columnList 首列字段名,     * @Param List&lt;Map&lt;String,String>> riskTypes,数据库查询的数据     * @Param String[] mapName数据取出规则     * @Date 2022/2/21 15:39     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">uploadExcel</span><span class="token punctuation">(</span>HttpServletResponse response<span class="token punctuation">,</span> String fileName<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> columnList<span class="token punctuation">,</span>List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">>></span> riskTypes<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//声明输出流</span>        OutputStream os <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置响应头</span>        <span class="token function">setResponseHeader</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//获取输出流</span>            os <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//内存中保留1000条数据，以免内存溢出，其余写入硬盘</span>            SXSSFWorkbook wb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SXSSFWorkbook</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//获取该工作区的第一个sheet</span>            Sheet sheet1 <span class="token operator">=</span> wb<span class="token punctuation">.</span><span class="token function">createSheet</span><span class="token punctuation">(</span><span class="token string">"sheet1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> excelRow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//创建标题行</span>            Row titleRow <span class="token operator">=</span> sheet1<span class="token punctuation">.</span><span class="token function">createRow</span><span class="token punctuation">(</span>excelRow<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>columnList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//创建该行下的每一列，并写入标题数据</span>                Cell cell <span class="token operator">=</span> titleRow<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                cell<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//设置内容行</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>riskTypes<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> riskTypes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token function">extracted</span><span class="token punctuation">(</span>columnList<span class="token punctuation">,</span> riskTypes<span class="token punctuation">,</span> sheet1<span class="token punctuation">,</span> excelRow<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//将整理好的excel数据写入流中</span>            wb<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 关闭输出流</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>os <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * @Method 设置内容行     * @Author 40971     * @Description     * @Param     * @Return     * @Exception     * @Date 2022/2/21 16:12     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">extracted</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> columnList<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">>></span> riskTypes<span class="token punctuation">,</span> Sheet sheet1<span class="token punctuation">,</span> <span class="token keyword">int</span> excelRow<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//序号是从1开始的</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//外层for循环创建行</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> riskTypes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            Row dataRow <span class="token operator">=</span> sheet1<span class="token punctuation">.</span><span class="token function">createRow</span><span class="token punctuation">(</span>excelRow<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//内层for循环创建每行对应的列，并赋值</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span> riskTypes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                Cell cell <span class="token operator">=</span> dataRow<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//第一列是序号列，不是在数据库中读取的数据，因此手动递增赋值</span>                    cell<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//其余列是数据列，将数据库中读取到的数据依次赋值</span>                    <span class="token comment" spellcheck="true">//根据标题,取出map中对应的数据</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">==</span> riskTypes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token keyword">continue</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"日期"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                        cell<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>riskTypes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"T"</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>riskTypes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"null"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        cell<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>riskTypes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>columnList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * @Method 设置浏览器响应头    * @Author 40971    * @Param HttpServletResponse response,    * @Param String fileName 文件名字    * @Date 2022/2/21 15:37    */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setResponseHeader</span><span class="token punctuation">(</span>HttpServletResponse response<span class="token punctuation">,</span> String fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fileName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"ISO8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnsupportedEncodingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/octet-stream;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> <span class="token string">"attachment;filename="</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>            response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Pargam"</span><span class="token punctuation">,</span> <span class="token string">"no-cache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Cache-Control"</span><span class="token punctuation">,</span> <span class="token string">"no-cache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>controller</code></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"导入Excel数据"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/importExcel"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ResponseMessage <span class="token function">importExcelVal</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> MultipartFile file<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"文件不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        String result<span class="token operator">=</span>riskDetailService<span class="token punctuation">.</span><span class="token function">importExcelVal</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"导入成功"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"Excel数据读取成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>serviceIpl</code></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * @Method 导入excel     * @Author 409713427     * @Date 2022/2/23 18:14     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">importExcelVal</span><span class="token punctuation">(</span>MultipartFile file<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> riskDetails <span class="token operator">=</span> EasyPoiUtil<span class="token punctuation">.</span><span class="token function">importExcel</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> RiskDetail<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        System.out.println(riskDetails);</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>RiskDetail riskDetail <span class="token operator">:</span> riskDetails<span class="token punctuation">)</span> <span class="token punctuation">{</span>            String riskType <span class="token operator">=</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRiskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRiskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String riskDescribe <span class="token operator">=</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRiskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRiskDescribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String hazardFactors <span class="token operator">=</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRiskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHazardFactors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            QueryWrapper<span class="token operator">&lt;</span>RiskType<span class="token operator">></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            wrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"risk_type"</span><span class="token punctuation">,</span> riskType<span class="token punctuation">)</span><span class="token punctuation">;</span>            wrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"risk_describe"</span><span class="token punctuation">,</span> riskDescribe<span class="token punctuation">)</span><span class="token punctuation">;</span>            wrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"hazard_factors"</span><span class="token punctuation">,</span> hazardFactors<span class="token punctuation">)</span><span class="token punctuation">;</span>            List<span class="token operator">&lt;</span>RiskType<span class="token operator">></span> list <span class="token operator">=</span> riskTypeService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>null <span class="token operator">==</span> list <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                riskDetail<span class="token punctuation">.</span><span class="token function">setRiskTypeId</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            ZxRole role <span class="token operator">=</span> zxRoleService<span class="token punctuation">.</span><span class="token function">getOne</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token operator">&lt;</span>ZxRole<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRoleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            riskDetail<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>UUIDUtil<span class="token punctuation">.</span><span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            riskDetail<span class="token punctuation">.</span><span class="token function">setRoleId</span><span class="token punctuation">(</span>null <span class="token operator">==</span> role <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> role<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">boolean</span> b <span class="token operator">=</span> riskDetailService<span class="token punctuation">.</span><span class="token function">saveBatch</span><span class="token punctuation">(</span>riskDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token string">"导入成功"</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token keyword">return</span> <span class="token string">"导入失败"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="3"><li><h3 id="导出Excel"><a href="#导出Excel" class="headerlink" title="导出Excel"></a>导出Excel</h3></li></ol><p><code>controller</code></p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"导出风险辨识清单excel数据"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/exportExcelQD"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exportCorpLoanDemand</span><span class="token punctuation">(</span>HttpServletResponse response<span class="token punctuation">,</span>String condition<span class="token punctuation">)</span><span class="token punctuation">{</span>        String<span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> condition<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        riskDetailService<span class="token punctuation">.</span><span class="token function">exportExcelVal</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>serviceImpl</code></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * @Method 导出Excel     * @Author 409713427     * @Date 2022/2/23 18:14     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exportExcelVal</span><span class="token punctuation">(</span>HttpServletResponse response<span class="token punctuation">,</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>String<span class="token operator">></span> titleList <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"序号"</span><span class="token punctuation">,</span> <span class="token string">"风险点"</span><span class="token punctuation">,</span> <span class="token string">"风险类型"</span><span class="token punctuation">,</span> <span class="token string">"风险描述"</span><span class="token punctuation">,</span> <span class="token string">"风险等级"</span><span class="token punctuation">,</span> <span class="token string">"风险状态"</span><span class="token punctuation">,</span> <span class="token string">"危害因素"</span><span class="token punctuation">,</span> <span class="token string">"管控措施"</span><span class="token punctuation">,</span> <span class="token string">"负责角色"</span><span class="token punctuation">,</span> <span class="token string">"管控单位及负责人"</span><span class="token punctuation">,</span> <span class="token string">"最高管控单位及负责人"</span><span class="token punctuation">,</span> <span class="token string">"评估日期"</span><span class="token punctuation">,</span> <span class="token string">"解决日期"</span><span class="token punctuation">,</span> <span class="token string">"信息来源"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> riskDetailTypes <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ids <span class="token operator">==</span> null <span class="token operator">||</span> ids<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            riskDetailTypes <span class="token operator">=</span> riskDetailMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            QueryWrapper<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            wrapper<span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>            riskDetailTypes <span class="token operator">=</span> riskDetailMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">>></span> dataList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        构造数据</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>RiskDetail riskDetail <span class="token operator">:</span> riskDetailTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>            Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险点"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRiskPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            RiskType riskType <span class="token operator">=</span> riskTypeService<span class="token punctuation">.</span><span class="token function">selectOneRiskType</span><span class="token punctuation">(</span>riskDetail<span class="token punctuation">.</span><span class="token function">getRiskTypeId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> riskType<span class="token punctuation">)</span> <span class="token punctuation">{</span>                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险类型"</span><span class="token punctuation">,</span> riskType<span class="token punctuation">.</span><span class="token function">getRiskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险类型"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险描述"</span><span class="token punctuation">,</span> riskType<span class="token punctuation">.</span><span class="token function">getRiskDescribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险等级"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getRiskLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"风险状态"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getIsEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"危害因素"</span><span class="token punctuation">,</span> riskType<span class="token punctuation">.</span><span class="token function">getHazardFactors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"管控措施"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getControlMeasures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ZxRole byId <span class="token operator">=</span> zxRoleService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>riskDetail<span class="token punctuation">.</span><span class="token function">getRoleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> byId<span class="token punctuation">)</span> <span class="token punctuation">{</span>                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"负责角色"</span><span class="token punctuation">,</span> byId<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"负责角色"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"管控单位及负责人"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getChargeUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> riskDetail<span class="token punctuation">.</span><span class="token function">getCheckUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"最高管控单位及负责人"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getHighestChargeUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"评估日期"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getEvaluationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"解决日期"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getTargetTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"信息来源"</span><span class="token punctuation">,</span> riskDetail<span class="token punctuation">.</span><span class="token function">getInfoOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            dataList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        FileUtils<span class="token punctuation">.</span><span class="token function">uploadExcel</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token string">"风险辨识清单数据.xlsx"</span><span class="token punctuation">,</span> titleList<span class="token punctuation">,</span> dataList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="4"><li><h3 id="mysql查询年度报表"><a href="#mysql查询年度报表" class="headerlink" title="mysql查询年度报表"></a>mysql查询年度报表</h3></li></ol><p><code>controller</code></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"风险管控年度数据"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/riskannualData"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ResponseMessage <span class="token function">selectriskannualData</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span> String year<span class="token punctuation">)</span><span class="token punctuation">{</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">>></span> result <span class="token operator">=</span> riskDetailService<span class="token punctuation">.</span><span class="token function">selectriskannualData</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseMessage</span><span class="token punctuation">(</span><span class="token string">"200"</span><span class="token punctuation">,</span><span class="token string">"查询成功"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>serviceImpl</code></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * @Method 风险管控年度数据     * @Author 409713427     * @Date 2022/2/23 18:14     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">>></span> <span class="token function">selectriskannualData</span><span class="token punctuation">(</span>String year<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//存放最后返回的数据容器  Map&lt;月份,Map&lt;总风险/已管控/未管控,数量>></span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">>></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//初始化12个月数据</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">></span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"总风险"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"已管控"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"未管控"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">"月"</span><span class="token punctuation">,</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//准备循环中需要用的变量</span>        <span class="token comment" spellcheck="true">//当前月份</span>        String month<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当前月份的状态</span>        String isCheck<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当前月份未存入的值/当前月份和排查下已经存入的值</span>        Integer num1<span class="token punctuation">,</span>num2<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当前月份下的map对象</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">></span> temp<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当前月管控和未管控的总数量 统计的数量</span>        Integer total1<span class="token punctuation">,</span>total2<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//去数据库查数据</span>        List<span class="token operator">&lt;</span>RiskDetailDto<span class="token operator">></span> riskDetailDtos <span class="token operator">=</span> riskDetailMapper<span class="token punctuation">.</span><span class="token function">selectRiskAnnualData</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>RiskDetailDto riskDetailDto <span class="token operator">:</span> riskDetailDtos<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">/*            result.put(临时对象.几月,获取已经存入的value(临时对象.几月).存入(是否管控, 之前的数量+新的数量));            * */</span>            <span class="token comment" spellcheck="true">//当前月份</span>            month <span class="token operator">=</span> riskDetailDto<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//当前月份的状态</span>            isCheck <span class="token operator">=</span> riskDetailDto<span class="token punctuation">.</span><span class="token function">getIsCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">==</span> month <span class="token operator">||</span> null <span class="token operator">==</span> isCheck<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//当前月份未存入的值</span>            num1 <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>riskDetailDto<span class="token punctuation">.</span><span class="token function">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//当前月份下的map对象</span>            temp <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">==</span> temp<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//当前月份和排查下已经存入的值</span>            num2 <span class="token operator">=</span>temp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>isCheck<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">==</span> num2<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//存入当前月份和状态下 统计的数量</span>            temp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>isCheck<span class="token punctuation">,</span>num1<span class="token operator">+</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span>            total1 <span class="token operator">=</span>temp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"已管控"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total2 <span class="token operator">=</span>temp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"未管控"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"总风险"</span><span class="token punctuation">,</span> total1<span class="token operator">+</span>total2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//重新存入</span>            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>month<span class="token punctuation">,</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>mapper.xml</code></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>selectRiskAnnualData<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zgiot.sf.security.dto.RiskDetailDto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select            case(DATE_FORMAT(effect_time,"%m"))                when '01' then '1月'                when '02' then '2月'                when '03' then '3月'                when '04' then '4月'                when '05' then '5月'                when '06' then '6月'                when '07' then '7月'                when '08' then '8月'                when '09' then '9月'                when '10' then '10月'                when '11' then '11月'                when '12' then '12月'                end as month,            count(1) as numbers,            is_check as isCheck        FROM risk_detail        where            DATE_FORMAT(effect_time,"%Y") = #{year}        group by            month,is_check    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"导出风险辨识清单excel数据"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/exportExcelQD"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exportCorpLoanDemand</span><span class="token punctuation">(</span>HttpServletResponse response<span class="token punctuation">,</span>String condition<span class="token punctuation">)</span><span class="token punctuation">{</span>        String<span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> condition<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        riskDetailService<span class="token punctuation">.</span><span class="token function">exportExcelVal</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"导入Excel数据"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/importExcel"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ResponseMessage <span class="token function">importExcelVal</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> MultipartFile file<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"文件不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        String result<span class="token operator">=</span>riskDetailService<span class="token punctuation">.</span><span class="token function">importExcelVal</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"导入成功"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"Excel数据读取成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><code>serviceImpl</code></p><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">//高级检索</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>RiskDetail<span class="token operator">></span> <span class="token function">selectRiskDetail</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>SearchVO<span class="token operator">></span> riskDetails<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> springboot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】在vue中使用axios请求数据  v-for渲染数据的时候结构没有出来的问题</title>
      <link href="/2021/120830546.html"/>
      <url>/2021/120830546.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="在vue中使用axios请求数据-v-for渲染数据的时候结构没有出来的问题"><a href="#在vue中使用axios请求数据-v-for渲染数据的时候结构没有出来的问题" class="headerlink" title="在vue中使用axios请求数据  v-for渲染数据的时候结构没有出来的问题"></a>在vue中使用axios请求数据  v-for渲染数据的时候结构没有出来的问题</h1><h3 id="1-问题说明"><a href="#1-问题说明" class="headerlink" title="1.问题说明"></a>1.问题说明</h3><p>在使用axios向后台请求数据时，根据后台接口返回的数据，res.data.data 返回的是一个数组对象，并且将这个数组对象赋值给了在data定义的一个空数组，打印这个空数组，是真实存在的数据 res.data.data 使用v-for循环结构的时候，数据并没有出来<br>以上都是常规操作，但是渲染的结构并没有出来</p><h3 id="2-问题截图说明"><a href="#2-问题截图说明" class="headerlink" title="2.问题截图说明"></a>2.问题截图说明</h3><p>2.0.1  axios部分 没什么问题 正常打印</p><p><a href="https://imgtu.com/i/o2k43D" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2021/12/08/o2k43D.png" alt="o2k43D.png"></a></p><p>2.0.2 v-for部分 </p><p><a href="https://imgtu.com/i/o2k5ge" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2021/12/08/o2k5ge.png" alt="o2k5ge.png"></a></p><p>2.0.3 页面显示截图  数据能够正常打印 但是不挂载</p><p><a href="https://imgtu.com/i/o2kIjH" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2021/12/08/o2kIjH.png" alt="o2kIjH.png"></a></p><h3 id="3-问题分析"><a href="#3-问题分析" class="headerlink" title="3.问题分析"></a>3.问题分析</h3><p>3.1 我开始以为是this指向问题,但是我用的箭头函数应该会把this指向变成windows</p><p>3.2 然后看网上说可能是生命周期的问题,说是查询有延迟,但是初始化过早,所以数据不挂载,让加定时器什么的,由于本人vue目前只学习了基本用法,所以这种方法并没有尝试,后期会回来试一下</p><p>3.3 还有一部分人说我后台返回的是json格式,但是我前端定义的是数组,要用push,将数据push到数组当中,这个方案对于我这问题并没有什么用.但是其他人貌似有用这个办法解决的</p><h3 id="4-解决办法"><a href="#4-解决办法" class="headerlink" title="4.解决办法"></a>4.解决办法</h3><p>在定义的空数组中加有个null, 最终页面也显示出来了,虽然解决了,但是具体什么原因还真不太清楚,等我弄明白再回来改QWQ</p><p><a href="https://imgtu.com/i/o2kh9O" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2021/12/08/o2kh9O.png" alt="o2kh9O.png"></a><br><a href="https://imgtu.com/i/o2kTud" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2021/12/08/o2kTud.png" alt="o2kTud.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】springboot+maven+多模块开发报错总结</title>
      <link href="/2021/111845779.html"/>
      <url>/2021/111845779.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="springboot-maven-多模块开发报错总结"><a href="#springboot-maven-多模块开发报错总结" class="headerlink" title="springboot+maven+多模块开发报错总结"></a>springboot+maven+多模块开发报错总结</h1><blockquote><p>1.找不到<code>main</code></p></blockquote><p>在我的父工程中build是这样的</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                <span class="token comment" spellcheck="true">&lt;!--      springboot打包方式   --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--                    &lt;skip>true&lt;/skip>   默认跳过单元测试--></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><p>解决办法:只需要在父工程的build指定一下你的启动类在哪就行</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mainClass</span><span class="token punctuation">></span></span>com.wst.ApiApplication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mainClass</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><hr><blockquote><p>2.找不到<code>xxx.xxx.beans</code>包</p></blockquote><p>A项目依赖B项目，B项目中存在@service等注解，在本地eclipse中运行A项目时可以正常扫描B项目的注解创建对象。</p><p>但经过打包后，B项目和A项目的目录结构变成</p><pre class=" language-bash"><code class="language-bash">+BOOT-INF  +classes  +lib+META-INF+org.springframework.boot.loader</code></pre><p>B项目本身又作为A项目BOOT-INF/lib下的jar包，A项目使用java -jar从入口启动类启动后无法扫描到B项目的注解，</p><p>且B项目中的lib也与A项目中的lib下jar包存在重复。</p><p>解决办法:</p><p>在父项目的pom中加入:</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classifier</span><span class="token punctuation">></span></span>exec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classifier</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>  </code></pre><p>spring-boot工程打包编译时，会生成两种jar包，一种是普通的jar，另一种是可执行jar。默认情况下，这两种jar的名称相同，在不做配置的情况下，普通的jar先生成，可执行jar后生成，所以可执行jar会覆盖普通的jar。</p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】SpringBoot 打包异常：Unable to find main class</title>
      <link href="/2021/111740263.html"/>
      <url>/2021/111740263.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="SpringBoot-打包异常：Unable-to-find-main-class"><a href="#SpringBoot-打包异常：Unable-to-find-main-class" class="headerlink" title="SpringBoot 打包异常：Unable to find main class"></a>SpringBoot 打包异常：Unable to find main class</h1><p>正确解决方案是把parent的pom.xml的build给去掉,哪里需要build就写在哪个子项目的pom.xml上</p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】springboot访问jsp页面时候却变成了下载文件</title>
      <link href="/2021/111755763.html"/>
      <url>/2021/111755763.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="springboot访问jsp页面时候却变成了下载文件"><a href="#springboot访问jsp页面时候却变成了下载文件" class="headerlink" title="springboot访问jsp页面时候却变成了下载文件"></a>springboot访问jsp页面时候却变成了下载文件</h1><p>前几天在本身写springboot项目的时候遇到个棘手 的问题，就是我访问项目url的时候原本应该跳转到jsp页面呢，然而却变成了下载文件</p><p>打开文件一看居然是我要访问的jsp页面内容。感到很奇怪，因而就仔细检查代码，检查是否加上了responseBodyspring</p><p>是否把路径写做了，配置文件里是否有错误问题，找了半天都没有发现问题，百度了一番，说是没有加入jsp的相关依赖。而后就尝试着加入下边的依赖</p><pre class=" language-xml"><code class="language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.tomcat.embed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>tomcat-embed-jasper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>tomcat-jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>尝试从新启动一下，果真就行了</p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】SpringBoot中注入StringRedisTemplate异常</title>
      <link href="/2021/111759353.html"/>
      <url>/2021/111759353.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="解决：SpringBoot中注入StringRedisTemplate异常"><a href="#解决：SpringBoot中注入StringRedisTemplate异常" class="headerlink" title="解决：SpringBoot中注入StringRedisTemplate异常"></a>解决：SpringBoot中注入StringRedisTemplate异常</h1><p>再学习springboot整合redis时,使用了<strong>StringRedisTemplate</strong>,结果测试启动时报错了：</p><pre class=" language-java"><code class="language-java">Error starting ApplicationContext<span class="token punctuation">.</span> To display the conditions report re<span class="token operator">-</span>run your application with <span class="token string">'debug'</span> enabled<span class="token punctuation">.</span><span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">38</span><span class="token operator">:</span><span class="token number">14.394</span> ERROR <span class="token number">4756</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication               <span class="token operator">:</span> Application run failedorg<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanCreationException<span class="token operator">:</span> Error creating bean with name <span class="token string">'userController'</span><span class="token operator">:</span> Injection of resource dependencies failed<span class="token punctuation">;</span> nested exception is org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanCreationException<span class="token operator">:</span> Error creating bean with name <span class="token string">'userServiceImpl'</span><span class="token operator">:</span> Injection of resource dependencies failed<span class="token punctuation">;</span> nested exception is org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanNotOfRequiredTypeException<span class="token operator">:</span> Bean named <span class="token string">'redisTemplate'</span> is expected to be of type <span class="token string">'org.springframework.data.redis.core.StringRedisTemplate'</span> but was actually of type <span class="token string">'org.springframework.data.redis.core.RedisTemplate'</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">postProcessProperties</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">324</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">populateBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1411</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">doCreateBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">592</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">createBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">515</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span>lambda$doGetBean$<span class="token function">0</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">320</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultSingletonBeanRegistry<span class="token punctuation">.</span><span class="token function">getSingleton</span><span class="token punctuation">(</span>DefaultSingletonBeanRegistry<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">222</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">doGetBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">318</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">199</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">preInstantiateSingletons</span><span class="token punctuation">(</span>DefaultListableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">845</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractApplicationContext<span class="token punctuation">.</span><span class="token function">finishBeanFactoryInitialization</span><span class="token punctuation">(</span>AbstractApplicationContext<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">877</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractApplicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>AbstractApplicationContext<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">549</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>context<span class="token punctuation">.</span>ServletWebServerApplicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>ServletWebServerApplicationContext<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">141</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">744</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication<span class="token punctuation">.</span><span class="token function">refreshContext</span><span class="token punctuation">(</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">391</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">312</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1215</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1204</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at com<span class="token punctuation">.</span>wst<span class="token punctuation">.</span>SpringbootQf1Application<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>SpringbootQf1Application<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>classes<span class="token operator">/</span><span class="token operator">:</span>na<span class="token punctuation">]</span>Caused by<span class="token operator">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanCreationException<span class="token operator">:</span> Error creating bean with name <span class="token string">'userServiceImpl'</span><span class="token operator">:</span> Injection of resource dependencies failed<span class="token punctuation">;</span> nested exception is org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanNotOfRequiredTypeException<span class="token operator">:</span> Bean named <span class="token string">'redisTemplate'</span> is expected to be of type <span class="token string">'org.springframework.data.redis.core.StringRedisTemplate'</span> but was actually of type <span class="token string">'org.springframework.data.redis.core.RedisTemplate'</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">postProcessProperties</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">324</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">populateBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1411</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">doCreateBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">592</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">createBean</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">515</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span>lambda$doGetBean$<span class="token function">0</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">320</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultSingletonBeanRegistry<span class="token punctuation">.</span><span class="token function">getSingleton</span><span class="token punctuation">(</span>DefaultSingletonBeanRegistry<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">222</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">doGetBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">318</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">199</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>config<span class="token punctuation">.</span>DependencyDescriptor<span class="token punctuation">.</span><span class="token function">resolveCandidate</span><span class="token punctuation">(</span>DependencyDescriptor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">277</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">doResolveDependency</span><span class="token punctuation">(</span>DefaultListableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1251</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">resolveDependency</span><span class="token punctuation">(</span>DefaultListableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1171</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">autowireResource</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">520</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">496</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor$ResourceElement<span class="token punctuation">.</span><span class="token function">getResourceToInject</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">636</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>InjectionMetadata$InjectedElement<span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span>InjectionMetadata<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>InjectionMetadata<span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span>InjectionMetadata<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">postProcessProperties</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">321</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">17</span> common frames omittedCaused by<span class="token operator">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>BeanNotOfRequiredTypeException<span class="token operator">:</span> Bean named <span class="token string">'redisTemplate'</span> is expected to be of type <span class="token string">'org.springframework.data.redis.core.StringRedisTemplate'</span> but was actually of type <span class="token string">'org.springframework.data.redis.core.RedisTemplate'</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">doGetBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">392</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractBeanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>AbstractBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">204</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span><span class="token function">resolveBeanByName</span><span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">452</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">autowireResource</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">526</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">496</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor$ResourceElement<span class="token punctuation">.</span><span class="token function">getResourceToInject</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">636</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>InjectionMetadata$InjectedElement<span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span>InjectionMetadata<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>InjectionMetadata<span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span>InjectionMetadata<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span><span class="token function">postProcessProperties</span><span class="token punctuation">(</span>CommonAnnotationBeanPostProcessor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">321</span><span class="token punctuation">)</span> <span class="token operator">~</span><span class="token punctuation">[</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">.</span>jar<span class="token operator">:</span><span class="token number">5.1</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">]</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">33</span> common frames omitted</code></pre><p>翻译如下：</p><p>BeanCreationException：没有找到对应的bean，注入依赖资源项失败</p><p>``BeanNotOfRequiredTypeException：名为“redisTemplate”的Bean应为“org.springframework.data.redis.core.StringRedisTemplate”类型，但实际为“org.springframework.data.redis.core.redisTemplate”类型。这个就很奇怪，我并没有用到redisTemplate的依赖，也不可能注入出错</p><h4 id="后来我发现是这个Bean的名称问题，是因为名称问题导入注入失败？注入类型错误？"><a href="#后来我发现是这个Bean的名称问题，是因为名称问题导入注入失败？注入类型错误？" class="headerlink" title="后来我发现是这个Bean的名称问题，是因为名称问题导入注入失败？注入类型错误？"></a>后来我发现是这个Bean的名称问题，是因为名称问题导入注入失败？注入类型错误？</h4><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> StringRedisTemplate redisTemplate<span class="token punctuation">;</span>    </code></pre><h4 id="将redisTemplate改成stringRedisTemplate，好了，原因-Resource是默认取字段名进行按照名称注入，下面有具体介绍"><a href="#将redisTemplate改成stringRedisTemplate，好了，原因-Resource是默认取字段名进行按照名称注入，下面有具体介绍" class="headerlink" title="将redisTemplate改成stringRedisTemplate，好了，原因@Resource是默认取字段名进行按照名称注入，下面有具体介绍"></a>将redisTemplate改成stringRedisTemplate，好了，原因@Resource是默认取字段名进行按照名称注入，下面有具体介绍</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> StringRedisTemplate stringRedisTemplate<span class="token punctuation">;</span></code></pre><h2 id="关于-Autowired和-Resource注解"><a href="#关于-Autowired和-Resource注解" class="headerlink" title="关于@Autowired和@Resource注解"></a>关于@Autowired和@Resource注解</h2><pre class=" language-java"><code class="language-java">两个注解都可以完成依赖注入功能。<span class="token number">1</span><span class="token punctuation">.</span>@Autowired：  <span class="token annotation punctuation">@Autowired</span> ：默认是以byType按类型自动注入。  <span class="token annotation punctuation">@Autowired</span> <span class="token operator">+</span> <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">""</span>名称<span class="token string">""</span><span class="token punctuation">)</span>：将按照名称自动注入  <span class="token number">2</span><span class="token punctuation">.</span>@Resource：  <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 如果没有指定name属性，当注解写在字段上时，默认取字段名进行按照名称注入，  如果注解写在setter方法上默认取属性名进行注入。   当找不到与名称匹配的bean时才按照类型进行装配。但是需要注意的是，如果name属性一旦指定，就只会按照名称进行装配。  <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">""</span><span class="token string">""</span><span class="token punctuation">)</span>  将按照名称自动注入</code></pre>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】SpringBoot配置thymeleaf 启动报错 org.thymeleaf.spring5.SpringTemplateEngine.setRenderHiddenMarkersBefore</title>
      <link href="/2021/110964583.html"/>
      <url>/2021/110964583.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="SpringBoot配置thymeleaf-启动报错-org-thymeleaf-spring5-SpringTemplateEngine-setRenderHiddenMarkersBefore"><a href="#SpringBoot配置thymeleaf-启动报错-org-thymeleaf-spring5-SpringTemplateEngine-setRenderHiddenMarkersBefore" class="headerlink" title="SpringBoot配置thymeleaf 启动报错 org.thymeleaf.spring5.SpringTemplateEngine.setRenderHiddenMarkersBefore"></a>SpringBoot配置thymeleaf 启动报错 org.thymeleaf.spring5.SpringTemplateEngine.setRenderHiddenMarkersBefore</h1><h2 id="pom文件配置"><a href="#pom文件配置" class="headerlink" title="pom文件配置"></a>pom文件配置</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf.version</span><span class="token punctuation">></span></span>3.0.9.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf.version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf-layout-dialect.version</span><span class="token punctuation">></span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf-layout-dialect.version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><h2 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h2><pre class=" language-apl"><code class="language-apl">Description<span class="token dfn builtin">:</span>An attempt was made to call a method that does not exist<span class="token dyadic-operator operator">.</span> The attempt was made from the following location<span class="token dfn builtin">:</span> org<span class="token dyadic-operator operator">.</span>springframework<span class="token dyadic-operator operator">.</span>boot<span class="token dyadic-operator operator">.</span>autoconfigure<span class="token dyadic-operator operator">.</span>thymeleaf<span class="token dyadic-operator operator">.</span>ThymeleafAutoConfiguration$ThymeleafDefaultConfiguration<span class="token dyadic-operator operator">.</span>templateEngine<span class="token punctuation">(</span>ThymeleafAutoConfiguration<span class="token dyadic-operator operator">.</span>java<span class="token dfn builtin">:</span><span class="token number">142</span><span class="token punctuation">)</span>The following method did not exist<span class="token dfn builtin">:</span>    org<span class="token dyadic-operator operator">.</span>thymeleaf<span class="token dyadic-operator operator">.</span>spring<span class="token number">5</span><span class="token dyadic-operator operator">.</span>SpringTemplateEngine<span class="token dyadic-operator operator">.</span>setRenderHiddenMarkersBeforeCheckboxes<span class="token punctuation">(</span>Z<span class="token punctuation">)</span>VThe method's class<span class="token function">,</span> org<span class="token dyadic-operator operator">.</span>thymeleaf<span class="token dyadic-operator operator">.</span>spring<span class="token number">5</span><span class="token dyadic-operator operator">.</span>SpringTemplateEngine<span class="token function">,</span> is available from the following locations<span class="token dfn builtin">:</span>    jar<span class="token dfn builtin">:</span>file<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span>D<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span>repository<span class="token monadic-operator operator">/</span>org<span class="token monadic-operator operator">/</span>thymeleaf<span class="token monadic-operator operator">/</span>thymeleaf<span class="token function">-</span>spring<span class="token number">5</span><span class="token monadic-operator operator">/</span><span class="token number">3.0</span><span class="token number">.9</span><span class="token dyadic-operator operator">.</span>RELEASE<span class="token monadic-operator operator">/</span>thymeleaf<span class="token function">-</span>spring<span class="token number">5</span><span class="token function">-</span><span class="token number">3.0</span><span class="token number">.9</span><span class="token dyadic-operator operator">.</span>RELEASE<span class="token dyadic-operator operator">.</span>jar<span class="token function">!</span><span class="token monadic-operator operator">/</span>org<span class="token monadic-operator operator">/</span>thymeleaf<span class="token monadic-operator operator">/</span>spring<span class="token number">5</span><span class="token monadic-operator operator">/</span>SpringTemplateEngine<span class="token dyadic-operator operator">.</span>classIt was loaded from the following location<span class="token dfn builtin">:</span>    file<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span>D<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span>repository<span class="token monadic-operator operator">/</span>org<span class="token monadic-operator operator">/</span>thymeleaf<span class="token monadic-operator operator">/</span>thymeleaf<span class="token function">-</span>spring<span class="token number">5</span><span class="token monadic-operator operator">/</span><span class="token number">3.0</span><span class="token number">.9</span><span class="token dyadic-operator operator">.</span>RELEASE<span class="token monadic-operator operator">/</span>thymeleaf<span class="token function">-</span>spring<span class="token number">5</span><span class="token function">-</span><span class="token number">3.0</span><span class="token number">.9</span><span class="token dyadic-operator operator">.</span>RELEASE<span class="token dyadic-operator operator">.</span>jarAction<span class="token dfn builtin">:</span>Correct the classpath of your application so that it contains a single<span class="token function">,</span> compatible version of org<span class="token dyadic-operator operator">.</span>thymeleaf<span class="token dyadic-operator operator">.</span>spring<span class="token number">5</span><span class="token dyadic-operator operator">.</span>SpringTemplateEngineProcess finished with exit code <span class="token number">1</span></code></pre><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p><em><strong>当前thymeleaf版本为&lt;thymeleaf.version&gt;3.0.11.RELEASE&lt;/thymeleaf.version&gt;<br> &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt;已经不适用</strong></em></p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><strong>将&lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt;</strong><br> <strong>改为：</strong></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf.version</span><span class="token punctuation">></span></span>3.0.11.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf.version</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】maven管理springboot项目可以不用写依赖的版本号</title>
      <link href="/2021/110842044.html"/>
      <url>/2021/110842044.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="maven管理springboot项目可以不用写依赖的版本号"><a href="#maven管理springboot项目可以不用写依赖的版本号" class="headerlink" title="maven管理springboot项目可以不用写依赖的版本号"></a>maven管理springboot项目可以不用写依赖的版本号</h1><h3 id="学习springboot的时候发现maven的依赖是不用写版本号的，依然可以正常跑起来，这是为什么呢？"><a href="#学习springboot的时候发现maven的依赖是不用写版本号的，依然可以正常跑起来，这是为什么呢？" class="headerlink" title="学习springboot的时候发现maven的依赖是不用写版本号的，依然可以正常跑起来，这是为什么呢？"></a>学习springboot的时候发现maven的依赖是不用写版本号的，依然可以正常跑起来，这是为什么呢？</h3><hr><p>这是因为<strong>添加“parent”标签里的内容后，“spring-boot-starter-parent”会为开发者提供常用jar的版本管理，所以我们不需要指定版本，使用人家提供好的就可以了。当然，指定也是可以的，这会覆盖官方默认的版本，不推荐。</strong></p><hr><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.5.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/></span></span> <span class="token comment" spellcheck="true">&lt;!-- lookup parent from repository --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--下面两个没有版本号 使用springboot提供好的版本 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【bug】spring整合MyBatis,maven工程中c3p0的jar包导入坐标</title>
      <link href="/2021/110721021.html"/>
      <url>/2021/110721021.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Receiver-class-com-mchange-v2-c3p0-impl-NewProxyResultSet-does-not-define-or-inherit-an-implementati"><a href="#Receiver-class-com-mchange-v2-c3p0-impl-NewProxyResultSet-does-not-define-or-inherit-an-implementati" class="headerlink" title="Receiver class com.mchange.v2.c3p0.impl.NewProxyResultSet does not define or inherit an implementati"></a>Receiver class com.mchange.v2.c3p0.impl.NewProxyResultSet does not define or inherit an implementati</h1><h3 id="最近做SSM框架整合测试的时候，spring整合MyBatis的时候，运行测试报错以下"><a href="#最近做SSM框架整合测试的时候，spring整合MyBatis的时候，运行测试报错以下" class="headerlink" title="最近做SSM框架整合测试的时候，spring整合MyBatis的时候，运行测试报错以下:"></a>最近做SSM框架整合测试的时候，spring整合MyBatis的时候，运行测试报错以下:</h3><p><a href="https://imgtu.com/i/I1afN8" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/11/07/I1afN8.png" alt="I1afN8.png"></a></p><h3 id="解决"><a href="#解决" class="headerlink" title="解决:"></a>解决:</h3><p>面向百度一顿查,然后发现maven工程中c3p0的jar包导的有问题:</p><p>错误</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>c3p0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>c3p0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.9.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>正确</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.mchange<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>c3p0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.9.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【JS新特性系列】ES6新增属性Symbol详解</title>
      <link href="/2021/102719592.html"/>
      <url>/2021/102719592.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ES6新增属性Symbol详解"><a href="#ES6新增属性Symbol详解" class="headerlink" title="ES6新增属性Symbol详解"></a>ES6新增属性Symbol详解</h1><h2 id="1-什么Symbol"><a href="#1-什么Symbol" class="headerlink" title="1.什么Symbol?"></a>1.什么Symbol?</h2><p>Symbol是ES6中新增的一种数据类型, 被划分到了基本数据类型中<br>基本数据类型: 字符串、数值、布尔、undefined、null、Symbol<br>引用数据类型: Object</p><h2 id="2-Symbol的作用"><a href="#2-Symbol的作用" class="headerlink" title="2.Symbol的作用"></a>2.Symbol的作用</h2><p>用来表示一个独一无二的值</p><h2 id="3-如果生成一个独一无二的值"><a href="#3-如果生成一个独一无二的值" class="headerlink" title="3.如果生成一个独一无二的值?"></a>3.如果生成一个独一无二的值?</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="4-为什么需要Symbol"><a href="#4-为什么需要Symbol" class="headerlink" title="4.为什么需要Symbol?"></a>4.为什么需要Symbol?</h2><p>在企业开发中如果需要对一些第三方的插件、框架进行自定义的时候<br>可能会因为添加了同名的属性或者方法, 将框架中原有的属性或者方法覆盖掉<br>为了避免这种情况的发生, 框架的作者或者我们就可以使用Symbol作为属性或者方法的名称</p><h2 id="5-如何区分Symbol"><a href="#5-如何区分Symbol" class="headerlink" title="5.如何区分Symbol?"></a>5.如何区分Symbol?</h2><p>在通过Symbol生成独一无二的值时可以设置一个标记<br>这个标记仅仅用于区分, 没有其它任何含义</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">"lnj"</span><span class="token punctuation">,</span>    say<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"it666"</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//it666 原值被覆盖</span>obj<span class="token punctuation">.</span>say <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//test 原方法被覆盖</span><span class="token comment" spellcheck="true">//解决方案: 用symbol</span><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> say <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 注意点: 如果想使用变量作为对象属性的名称, 那么必须加上[]</span>    <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"lnj"</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span>say<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// obj.name = "it666";</span>obj<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"it666"</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="6-symbol注意点"><a href="#6-symbol注意点" class="headerlink" title="6.symbol注意点"></a>6.symbol注意点</h2><p>通过Symbol生成独一无二值时需要在后面加上(), 但是前面不能加new, 因为它不是引用类型</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 正确</span><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 错误</span></code></pre><p>通过Symbol生成独一无二值时传入的字符串仅仅是一个标记, 方便我们阅读代码, 没有其它任何意义</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>做类型转换的时候不能转换成数值</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>不能做任何运算</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xxx <span class="token operator">+</span> <span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//报错</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xxx <span class="token operator">+</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//报错</span></code></pre><p>Symbol生成的值作为属性或方法名称时, 一定更要保存下来, 否则后续无法使用</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// [name]: "lnj"</span>    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"it666"</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// console.log(obj[name]);</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>for循环无法遍历出Symbol的属性和方法</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> say <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 注意点: 如果想使用变量作为对象属性的名称, 那么必须加上[]</span>    <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"lnj"</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span>say<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">34</span><span class="token punctuation">,</span>    gender<span class="token punctuation">:</span> <span class="token string">"man"</span><span class="token punctuation">,</span>    hi<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// for(let key in obj){</span><span class="token comment" spellcheck="true">//     console.log(key);</span><span class="token comment" spellcheck="true">// }</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【JS新特性系列】Generator函数与async函数</title>
      <link href="/2021/102724586.html"/>
      <url>/2021/102724586.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Generator函数与async函数"><a href="#Generator函数与async函数" class="headerlink" title="Generator函数与async函数"></a>Generator函数与async函数</h1><h2 id="1-什么是Generator函数"><a href="#1-什么是Generator函数" class="headerlink" title="1.什么是Generator函数?"></a>1.什么是Generator函数?</h2><p>Generator 函数是 ES6 提供的一种异步编程解决方案<br>Generator 函数内部可以封装多个状态, 因此又可以理解为是一个状态机</p><h2 id="2-如何定义Generator函数"><a href="#2-如何定义Generator函数" class="headerlink" title="2.如何定义Generator函数"></a>2.如何定义Generator函数</h2><p>只需要在普通函数的function后面加上*即可</p><h2 id="3-Generator函数和普通函数区别"><a href="#3-Generator函数和普通函数区别" class="headerlink" title="3.Generator函数和普通函数区别"></a>3.Generator函数和普通函数区别</h2><p>3.1调用Generator函数后, 无论函数有没有返回值, 都会返回一个迭代器对象,<br>3.2调用Generator函数后, 函数中封装的代码不会立即被执行</p><h2 id="4-真正让Generator具有价值的是yield关键字"><a href="#4-真正让Generator具有价值的是yield关键字" class="headerlink" title="4.真正让Generator具有价值的是yield关键字"></a>4.真正让Generator具有价值的是yield关键字</h2><p>4.1在Generator函数内部使用yield关键字定义状态<br>4.2并且yield关键字可以让 Generator内部的逻辑能够切割成多个部分。<br>4.3通过调用迭代器对象的next方法执行一个部分代码,执行哪个部分就会返回哪个部分定义的状态</p><h2 id="5-在调用next方法的时候可以传递一个参数-这个参数会传递给上一个yield"><a href="#5-在调用next方法的时候可以传递一个参数-这个参数会传递给上一个yield" class="headerlink" title="5.在调用next方法的时候可以传递一个参数, 这个参数会传递给上一个yield"></a>5.在调用next方法的时候可以传递一个参数, 这个参数会传递给上一个yield</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">"aaa"</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"567"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">yield</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">yield</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// console.log(it);</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">"it666"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// console.log(it.next());</span><span class="token comment" spellcheck="true">// console.log(it.next());</span><span class="token comment" spellcheck="true">// 注意点: yield关键字只能在Generator函数中使用, 不能在普通函数中使用</span><span class="token comment" spellcheck="true">// function say() {</span><span class="token comment" spellcheck="true">//     yield "abc";</span><span class="token comment" spellcheck="true">// }</span><span class="token comment" spellcheck="true">// say();</span></code></pre><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>1.让函数返回多个值</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*function calculate(a, b) {    let sum = a + b;    let sub = a - b;    return [sum, sub];}*/</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token keyword">yield</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>2.用同步的流程来表示异步的操作</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/* 回调地狱实现function request(fn) {    setTimeout(function () {        fn("拿到的数据");    }, 1000);}request(function (data) {    console.log("1", data);    request(function (data) {        console.log("2", data);        request(function (data) {            console.log("3", data);        });    });});*/</span><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"拿到的数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* promise实现request().then(function (data) {    console.log(data, 1);    return request();}).then(function (data) {    console.log(data, 2);    return request();}).then(function (data) {    console.log(data, 3);});*/</span><span class="token comment" spellcheck="true">//Generator实现</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">yield</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">yield</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// console.log(it.next().value);</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>3.利用 Generator 函数，可以在任意对象上快速部署 Iterator 接口</p><pre class=" language-javascript"><code class="language-javascript"> <span class="token comment" spellcheck="true">/* Generator 函数特点 1.Generator 函数也是一个函数 2.Generator 函数会返回一个迭代器对象 3.迭代器对象有next方法 4.next方法每次执行都会返回一个对象{value: xxx, done: false} */</span> <span class="token comment" spellcheck="true">/* function* gen() {     yield "aaa";     yield "bbb";     yield "ccc"; } let it = gen(); // console.log(it); console.log(it.next()); */</span> <span class="token comment" spellcheck="true">/*1.必须有一个叫做[Symbol.iterator]的属性2.[Symbol.iterator]的属性会返回一个函数3.[Symbol.iterator]返回的函数执行之后会返回一个可迭代对象4.[Symbol.iterator]函数返回的对象中又一个名称叫做next的方法5.next方法每次执行都会返回一个对象{value: xxx, done: false}*/</span> <span class="token comment" spellcheck="true">/* let obj = {     name: "lnj",     age: 34,     gender: "man",     [Symbol.iterator](){         let keys = Object.keys(this);         // console.log(keys);         let index = 0;         let that = this;         return {             next(){                 if(index &lt; keys.length){                     return {value: that[keys[index++]], done: false};                 }else{                     return {value: undefined, done: true};                 }             }         }     } } // console.log(obj[Symbol.iterator]); // let it = obj[Symbol.iterator](); // console.log(it); // console.log(it.next()); // console.log(it.next()); // console.log(it.next()); // console.log(it.next()); for(let value of obj){     console.log(value); } */</span> <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>     name<span class="token punctuation">:</span> <span class="token string">"lnj"</span><span class="token punctuation">,</span>     age<span class="token punctuation">:</span> <span class="token number">34</span><span class="token punctuation">,</span>     gender<span class="token punctuation">:</span> <span class="token string">"man"</span> <span class="token punctuation">}</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>     <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         <span class="token keyword">yield</span> obj<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span> <span class="token punctuation">}</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> gen<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// console.log(obj[Symbol.iterator]);</span> <span class="token keyword">let</span> it <span class="token operator">=</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// console.log(it);</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="6-async函数"><a href="#6-async函数" class="headerlink" title="6.async函数"></a>6.async函数</h2><p>async函数是ES8中新增的一个函数, 用于定义一个异步函数<br>async函数函数中的代码会自动从上至下的执行代码</p><h2 id="7-await操作符"><a href="#7-await操作符" class="headerlink" title="7.await操作符"></a>7.await操作符</h2><p>await操作符只能在异步函数 async function 中使用<br>await表达式会暂停当前 async function 的执行，等待 Promise 处理完成。<br>若 Promise 正常处理(fulfilled)，其回调的resolve函数参数作为 await 表达式的值，然后继续执行 async function。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"拿到的数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/*function* gen() {    yield request();    yield request();    yield request();}let it = gen();it.next().value.then(function (data) {    console.log(data, 1);    return it.next().value;}).then(function (data) {    console.log(data, 2);    return it.next().value;}).then(function (data) {    console.log(data, 3);});*/</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> res2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> res3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res3<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【JS新特性系列】ES6 Promise总结</title>
      <link href="/2021/102715630.html"/>
      <url>/2021/102715630.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ES6中-Promise总结"><a href="#ES6中-Promise总结" class="headerlink" title="ES6中 Promise总结"></a>ES6中 Promise总结</h1><p>提示:如果你还不太懂js中的同步代码和异步代码 <a href="https://segmentfault.com/a/1190000015042127" target="_blank" rel="noopener">请参考此扩展阅读</a></p><h2 id="1-什么是Promise"><a href="#1-什么是Promise" class="headerlink" title="1.什么是Promise"></a>1.什么是Promise</h2><p>Promise 是ES6中新增的异步编程解决方案，在代码中的表现是一个对象.</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 需求: 从网络上加载3个资源, 要求加载完资源1才能加载资源2, 加载完资源2才能加载资源3</span><span class="token comment" spellcheck="true">//       前面任何一个资源加载失败, 后续资源都不加载</span><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">"拿到的数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">request</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">request</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*2.promise作用企业开发中为了保存异步代码的执行顺序, 那么就会出现回调函数层层嵌套如果回调函数嵌套的层数太多, 就会导致代码的阅读性, 可维护性大大降低promise对象可以将异步操作以同步流程来表示, 避免了回调函数层层嵌套(回调地狱)*/</span><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"拿到的数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="2-Promise的基本使用"><a href="#2-Promise的基本使用" class="headerlink" title="2.Promise的基本使用"></a>2.Promise的基本使用</h1><ol><li><p>什么是Promise?</p><p>Promise是ES6中新增的一个对象,<br>通过Promise就可以实现 用同步的流程来表示异步的操作<br>通过Promise就可以 避免回调函数层层嵌套(回调地狱)问题</p></li><li><p>如何创建Promise对象?</p><p>new Promise(function(resolve, reject){});<br>promise对象不是异步的, 只要创建promise对象就会立即执行存放的代码</p></li><li><p>Promise是如何实现 通过同步的流程来表示异步的操作的?</p><p>promise对象是通过状态的改变来实现的, 只要状态发生改变就会自动触发对应的函数</p></li><li><p>Promise对象三种状态</p><p>pending:   默认状态，只要没有告诉promise任务是成功还是失败就是pending状态<br>fulfilled(resolved): 只要调用resolve函数, 状态就会变为fulfilled, 表示操作成功<br>rejected:  只要调用rejected函数, 状态就会变为rejected, 表示操作失败<br>注意点: 状态一旦改变既不可逆, 既从pending变为fulfilled, 那么永远都是fulfilled</p><pre><code>         即从pending变为rejected, 那么永远都是rejected</code></pre></li><li><p>监听Promise状态改变</p><p>可以通过函数来监听状态的变化<br>resolved –&gt; then()<br>rejected –&gt; catch()</p></li></ol><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// resolve();</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"then"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    promise<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"catch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="3-then方法详解"><a href="#3-then方法详解" class="headerlink" title="3.then方法详解"></a>3.then方法详解</h2><p>then方法接收两个参数,<br>第一个参数是状态切换为成功时的回调,<br>第二个参数是状态切换为失败时的回调</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve(); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>then方法<br>在修改promise状态时, 可以传递参数给then方法中的回到函数</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// resolve = success, reject = error;</span><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve("111"); // 将状态修改为成功 success("111");</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败  error("aaa");</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// promise.then(function (data) {</span><span class="token comment" spellcheck="true">//     console.log("成功", data);</span><span class="token comment" spellcheck="true">// }, function (data) {</span><span class="token comment" spellcheck="true">//     console.log("失败", data);</span><span class="token comment" spellcheck="true">// });</span><span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>then方法<br>同一个promise对象可以多次调用then方法,<br>当该promise对象的状态时所有then方法都会被执行</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve(); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>then方法<br>then方法每次执行完毕后会返回一个新的promise对象</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为成功</span>    <span class="token comment" spellcheck="true">// reject(); // 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> p2 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>promise <span class="token operator">===</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//false</span></code></pre><p>then方法<br>可以通过上一个promise对象的then方法给下一个promise对象的then方法传递参数<br>注意点:<br>无论是在上一个promise对象成功的回调还是失败的回调传递的参数,<br>都会传递给下一个promise对象成功的回调</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve("111"); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> p2 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功1"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"222"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败1"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"bbb"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p2<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功2"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败2"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>then方法<br>如果then方法返回的是一个Promise对象, 那么会将返回的Promise对象的<br>执行结果中的值传递给下一个then方法</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为成功</span>    <span class="token comment" spellcheck="true">// reject("aaa"); // 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> ppp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve("222"); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"bbb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> p2 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功1"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ppp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败1"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"bbb"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p2<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功2"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败2"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="catch方法详解"><a href="#catch方法详解" class="headerlink" title="catch方法详解"></a>catch方法详解</h2><p>catch方法与then方法所讲的注意点基本一致,以下只说出catch独有的注意点</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*0.catch方法catch 其实是 then(undefined, () => {}) 的语法糖* */</span><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve(); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>promise<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*2.catch方法注意点: 如果需要分开监听, 也就是通过then监听成功通过catch监听失败那么必须使用链式编程, 否则会报错* */</span><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve(); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*  报错promise.then(function () {    console.log("成功");});promise.catch(function () {    console.log("失败");});*/</span><span class="token comment" spellcheck="true">/*3.catch方法不使用链式编程的原因是1.如果promise的状态是失败, 但是没有对应失败的监听就会报错2.then方法会返回一个新的promise, 新的promise会继承原有promise的状态3.如果新的promise状态是失败, 但是没有对应失败的监听也会报错* */</span><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// resolve(); // 将状态修改为成功</span>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将状态修改为失败</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> p2 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>promise<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p2<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*    6.catch方法    和then方法第二个参数的区别在于, catch方法可以捕获上一个promise对象then方法中的异常    * */</span>    <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// promise.then(function () {</span>    <span class="token comment" spellcheck="true">//     console.log("成功");</span>    <span class="token comment" spellcheck="true">//     xxx</span>    <span class="token comment" spellcheck="true">// }, function () {</span>    <span class="token comment" spellcheck="true">//     console.log("失败");</span>    <span class="token comment" spellcheck="true">// });</span>    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        xxx    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="promise应用场景练习"><a href="#promise应用场景练习" class="headerlink" title="promise应用场景练习"></a>promise应用场景练习</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*需求:一次加载一张图片添加到body中. 前面图片加载失败后面图片不加载*/</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">"http://www.xxx.com/picture_1.png"</span><span class="token punctuation">,</span>    <span class="token string">"http://www.xxx.com/picture_2.png"</span><span class="token punctuation">,</span>    <span class="token string">"http://wwww.xxx.com/files/picture_3.png"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> oImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       oImg<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>       oImg<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token function">resolve</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       oImg<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"图片加载失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>oImg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// console.log(oImg);</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>oImg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// console.log(oImg);</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>oImg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// console.log(oImg);</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="promise-all方法"><a href="#promise-all方法" class="headerlink" title="promise-all方法"></a>promise-all方法</h2><p>Promise的all静态方法:<br>1.all方法接收一个数组,<br>2.如果数组中有多个Promise对象,只有都成功才会执行then方法,并且会按照添加的顺序, 将所有成功的结果重新打包到一个数组中返回给我们.<br>3.如果数组中不是Promise对象, 那么会直接执行then方法</p><p>应用场景: 批量加载, 要么一起成功, 要么一起失败  </p><p>练习:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*需求:    无序加载图片, 只有所有图片都加载成功才添加, 有一张图片失败都不添加*/</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">"http://www.xxx.com/picture_1.png"</span><span class="token punctuation">,</span>    <span class="token string">"http://www.xxx.com/picture_2.png"</span><span class="token punctuation">,</span>    <span class="token string">"http://wwww.xxx.com/files/picture_3.png"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> oImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> time <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// console.log(time);</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            oImg<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// oImg.src = url;</span>        oImg<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">resolve</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        oImg<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"图片加载失败了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">loadImage</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// console.log(result);</span>            result<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>oImg<span class="token punctuation">)</span> <span class="token punctuation">{</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="promise-race方法"><a href="#promise-race方法" class="headerlink" title="promise-race方法"></a>promise-race方法</h2><p>Promise的race静态方法:<br>1.all方法接收一个数组,<br>2.如果数组中有多个Promise对象, 谁先返回状态就听谁的, 后返回的会被抛弃<br>3.如果数组中不是Promise对象, 那么会直接执行then方法</p><p>应用场景: 接口调试, 超时处理</p><p>场景模拟:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">"http://www.xxx.com/picture_1.png"</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> oImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            oImg<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oImg<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">resolve</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        oImg<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"图片加载失败了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"超时了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"失败"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【JS新特性系列】ajax,fetch,axios之间的详细区别以及优缺点</title>
      <link href="/2021/102634377.html"/>
      <url>/2021/102634377.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ajax-fetch-axios之间的详细区别以及优缺点"><a href="#ajax-fetch-axios之间的详细区别以及优缺点" class="headerlink" title="ajax,fetch,axios之间的详细区别以及优缺点"></a>ajax,fetch,axios之间的详细区别以及优缺点</h1><p>将jQuery的ajax、axios和fetch做个简单的比较，所谓仁者见仁智者见智，最终使用哪个还是自行斟酌</p><h2 id="1-jQuery-ajax"><a href="#1-jQuery-ajax" class="headerlink" title="1.jQuery ajax"></a>1.jQuery ajax</h2><pre class=" language-javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>   type<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>   url<span class="token punctuation">:</span> url<span class="token punctuation">,</span>   data<span class="token punctuation">:</span> data<span class="token punctuation">,</span>   dataType<span class="token punctuation">:</span> dataType<span class="token punctuation">,</span>   success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   error<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>优缺点：</p><p>本身是针对MVC的编程,不符合现在前端MVVM的浪潮<br>基于原生的XHR开发，XHR本身的架构不清晰，已经有了fetch的替代方案<br>JQuery整个项目太大，单纯使用ajax却要引入整个JQuery非常的不合理（采取个性化打包的方案又不能享受CDN服务）</p><h2 id="2-fetch"><a href="#2-fetch" class="headerlink" title="2.fetch"></a>2.fetch</h2><p>和Ajax一样都是用于请求网络数据的<br>fetch是ES6中新增的, 基于Promise的网络请求方法</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/jQuery/Ajax/xx.php"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        method<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>        body<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>teacher<span class="token punctuation">:</span><span class="token string">"hhh"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//res是response对象</span>        <span class="token comment" spellcheck="true">// console.log(res.text()); //.text()返回promise对象</span>        <span class="token comment" spellcheck="true">// return res.text();</span>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>优缺点：</p><p>符合关注分离，没有将输入、输出和用事件来跟踪的状态混杂在一个对象里<br>更好更方便的写法<br>更加底层，提供的API丰富（request, response）<br>脱离了XHR，是ES规范里新的实现方式<br>1）fetchtch只对网络请求报错，对400，500都当做成功的请求，需要封装去处理<br>2）fetch默认不会带cookie，需要添加配置项<br>3）fetch不支持abort，不支持超时控制，使用setTimeout及Promise.reject的实现的超时控制并不能阻止请求过程继续在后台运行，造成了量的浪费<br>4）fetch没有办法原生监测请求的进度，而XHR可以</p><h2 id="3-axios"><a href="#3-axios" class="headerlink" title="3.axios"></a>3.axios</h2><p>Axios 是一个基于 promise 的 HTTP 库网络请求插件.</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*3.全局的 axios 默认值在企业开发中项目分为 :开发阶段和部署阶段, 这两个阶段项目存储的位置是不同的项目上线前存储在企业内部测试服务器上, 项目上线后存储在企业正式服务器上所以如果每次请求都将请求的地址写在请求中, 那么项目上线时需要大量修改请求地址为了解决这个问题, 我们可以配置一个全局URL根地址, 项目上线时只需要修改根地址即可例如: 上线前地址是: http://127.0.0.1/jQuery/Ajax/xx.php      上线后地址是: http://192.199.13.14/jQuery/Ajax/xx.php*/</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">"http://127.0.0.1"</span><span class="token punctuation">;</span>axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/jQuery/Ajax/xx.php"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    teacher<span class="token punctuation">:</span> <span class="token string">"lnj"</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>优缺点：</p><ol><li>从 node.js 创建 http 请求</li><li>支持 Promise API</li><li>客户端支持防止CSRF</li><li>自动转换JSON数据</li><li>提供了一些并发请求的接口（重要，方便了很多的操作）</li></ol><p>为什么要用axios?<br>axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：</p><p>从浏览器中创建 XMLHttpRequest<br>从 node.js 发出 http 请求<br>支持 Promise API<br>拦截请求和响应<br>转换请求和响应数据<br>取消请求<br>自动转换JSON数据<br>客户端支持防止CSRF/XSRF</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【JS新特性系列】H5新增存储方案有以及同源跨域访问请求</title>
      <link href="/2021/102545839.html"/>
      <url>/2021/102545839.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="JS新特性"><a href="#JS新特性" class="headerlink" title="JS新特性"></a>JS新特性</h2><h3 id="H5新增存储方案"><a href="#H5新增存储方案" class="headerlink" title="H5新增存储方案"></a>H5新增存储方案</h3><p>1.SessionStorage和LocalStorage简介<br>        和Cookie一样, SessionStorage和LocalStorage也是用于存储网页中的数据的</p><p>2.Cookie、 SessionStorage、LocalStorage区别<br>    2.1生命周期(同一浏览器下)<br>        Cookie生命周期:         默认是关闭浏览器后失效, 但是也可以设置过期时间<br>        SessionStorage生命周期:     仅在当前会话(窗口)下有效，关闭窗口或浏览器后被清除, 不能设置过期时间<br>        LocalStorage生命周期:     除非被清除，否则永久保存</p><p>​    2.2容量<br>​        Cookie容量:         有大小(4KB左右)和个数(20~50)限制<br>​        SessionStorage容量:   有大小限制(5M左右)   <a href="http://dev-test.nemikor.com/web-storage/support-test/" target="_blank" rel="noopener">老外写的SessionStorage支撑测试</a><br>​        LocalStorage容量:     有大小限制(5M左右)   <a href="http://dev-test.nemikor.com/web-storage/support-test/" target="_blank" rel="noopener">老外写的LocalStorage支撑测试</a></p><p>​    2.3网络请求<br>​        Cookie网络请求:         每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题<br>​        SessionStorage网络请求: 仅在浏览器中保存，不参与和服务器的通信<br>​        LocalStorage网络请求:   仅在浏览器中保存，不参与和服务器的通信</p><p>3.Cookie、 SessionStorage、LocalStorage应用场景<br>    Cookie:         判断用户是否登录<br>    LocalStorage:   购物车<br>    sessionStorage: 表单数据</p><p>4.注意点:<br>    无论通过以上哪种方式存储的数据, 切记不能将敏感数据直接存储到本地</p><p>示例:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 存储cookie</span>document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"myName=hhh;path=/;domain=127.0.0.1;"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//存储sessionStorage,删除sessionStorage,清空sessionStorage</span>sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token string">"34"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//存储localStorage,删除localStorage,清空localStorage</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"lnj"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>1.什么是同源策略?<br>        同源策略（Same origin policy）是一种约定，它是浏览器最核心也最基本的安全功能<br>        所谓同源是指: 协议，域名，端口都相同,就是同源, 否则就是跨域</p><p>​    <a href="http://www.baidu.com/index.html" target="_blank" rel="noopener">http://www.baidu.com:80/index.html</a><br>​    协议: http/https/…<br>​    一级域名: baidu.com/taobao.com<br>​    二级域名: www/study/edu/…<br>​    端口号: 80/3306/…</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 协议+一级域名+二级域名+端口号都相同, 所以同源</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>htmlhttp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>detail<span class="token punctuation">.</span>html<span class="token comment" spellcheck="true">// 协议不同, 所以不同源, 是跨域</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>htmlhttps<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token comment" spellcheck="true">// 一级域名不同, 所以不同源, 是跨域</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>htmlhttp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>itzb<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token comment" spellcheck="true">// 二级域名不同, 所以不同源, 是跨域</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>htmlhttp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>edu<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token comment" spellcheck="true">// 端口号不同, 所以不同源, 是跨域</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">/</span>index<span class="token punctuation">.</span>htmlhttp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>it666<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">8090</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token comment" spellcheck="true">//ajax默认同源</span>        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            url<span class="token punctuation">:</span><span class="token string">"http://127.0.0.1:80/jQuery/Ajax/xxx.php"</span><span class="token punctuation">,</span>            success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            error<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>2.同源策略带来的影响<br>        在同源策略下, 浏览器只允许Ajax请求同源的数据, 不允许请求不同源的数据<br>        但在企业开发中, 一般情况下为了提升网页的性能, 网页和数据都是单独存储在不同服务器上的<br>        这时如果再通过Ajax请求数据就会拿不到跨域数据</p><p>3.跨域解决方案(除第一种 剩下的基本不用了)<br>        jsonp<br>        document.domain+iframe<br>        location.hash + iframe<br>        window.name + iframe<br>        window.postMessage<br>        flash等第三方插件</p><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><ol><li>什么是JSONP?<br>JSONP让网页从别的地址（跨域的地址）那获取资料，即跨域读取数据</li><li>JSONP实现跨域访问的原理<br>2.1  在同一界面中可以定义多个script标签<br>2.2  同一个界面中多个script标签中的数据可以相互访问<br>2.3  可以通过script的src属性导入其它资源<br>2.4  通过src属性导入其它资源的本质就是将资源拷贝到script标签中<br>2.5  script的src属性不仅能导入本地资源, 还能导入远程资源<br>2.6  由于script的src属性没有同源限制, 所以可以通过script的src属性来请求跨域数据</li></ol><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"http://127.0.0.1:80/jQuery/Ajax/xx.php"</span><span class="token operator">></span>    <span class="token comment" spellcheck="true">/*    当前网页的地址: http://127.0.0.1:63342/jQuery/Ajax/jsonp%E5%8E%9F%E7%90%86.html    远程资源的地址: http://127.0.0.1:80/jQuery/Ajax/jsonp.php*/</span>        <span class="token comment" spellcheck="true">/*    优化一    1.在企业开发中通过JSONP来获取跨域的数据,        一般情况下服务器返回的都不会是一个变量, 而是一个函数的调用    */</span>    <span class="token comment" spellcheck="true">/*    优化二    2.当前服务器返回的函数调用名称写死了 例如服务前返回demo() ,那么本地就必须有一个        服务器返回函数叫什么名称, 我们本地就必须定义一个叫什么名称的函数                解决方案:        通过URL参数的方式来动态指定函数名称        例:http://127.0.0.1:80/jQuery/Ajax/20-jsonp.php?cb=test        cb=test就是指定返回的函数调用名为test,后台获取到就可以定义一个test方法返回    */</span>    <span class="token comment" spellcheck="true">/*    优化三    3.由于script标签默认是同步, 前面的script标签没有加载完数据, 后面的script标签就不会被执行    所以请求数据的script标签必须放到后面            解决方案:        通过JS动态创建script标签, 因为JS动态创建的script标签默认就是异步的,        不用等到前面的标签加载完就可以执行后面的script标签    */</span>    <span class="token keyword">let</span> oScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    oScript<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"http://127.0.0.1:80/jQuery/Ajax/20-jsonp.php?cb=test"</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oScript<span class="token punctuation">)</span><span class="token punctuation">;</span>   </code></pre><h3 id="jQuery中jsonp使用"><a href="#jQuery中jsonp使用" class="headerlink" title="jQuery中jsonp使用"></a>jQuery中jsonp使用</h3><pre class=" language-javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> <span class="token string">"http://127.0.0.1:80/jQuery/Ajax/jsonp.php"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span><span class="token punctuation">{</span>        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"wst"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">21</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    dataType<span class="token punctuation">:</span> <span class="token string">"jsonp"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 告诉jQuery需要请求跨域的数据</span>    jsonp<span class="token punctuation">:</span> <span class="token string">"cb"</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// 告诉jQuery服务器在获取回调函数名称的时候需要用什么key来获取</span>    jsonpCallback<span class="token punctuation">:</span> <span class="token string">"wst"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 告诉jQuery服务器在获取回调函数名称的时候回调函数的名称是什么</span>    success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery封装JSONP原理"><a href="#jQuery封装JSONP原理" class="headerlink" title="jQuery封装JSONP原理"></a>jQuery封装JSONP原理</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//自己封装的jsonp</span><span class="token keyword">function</span> <span class="token function">obj2str</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 生成随机因子</span>    obj<span class="token punctuation">.</span>t <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// console.log(str);</span>    <span class="token keyword">return</span> str<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">myJSONP</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>    options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// http://127.0.0.1/jQuery/Ajax/jsonp.php?cb=wst&amp;name=wst&amp;age=21&amp;_=1559735634387</span>    <span class="token comment" spellcheck="true">// http://127.0.0.1/jQuery/Ajax/jsonp.php?cb=wst&amp;name=wst&amp;age=21&amp;t=08520581619221432</span>    <span class="token comment" spellcheck="true">// 1.生成URL地址</span>    <span class="token keyword">let</span> url <span class="token operator">=</span> options<span class="token punctuation">.</span>url<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>jsonp<span class="token punctuation">)</span><span class="token punctuation">{</span>        url <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">"?"</span> <span class="token operator">+</span> options<span class="token punctuation">.</span>jsonp <span class="token operator">+</span> <span class="token string">"="</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        url <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">"?callback="</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> callbackName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"jQuery"</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">)</span><span class="token punctuation">{</span>        callbackName <span class="token operator">=</span> options<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">;</span>        url <span class="token operator">+</span><span class="token operator">=</span> options<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// console.log(callbackName);</span>        url <span class="token operator">+</span><span class="token operator">=</span> callbackName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token function">obj2str</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        url <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">"&amp;"</span> <span class="token operator">+</span> str<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// console.log(url);</span>    <span class="token comment" spellcheck="true">// 2.获取跨域的数据</span>    <span class="token keyword">let</span> oScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    oScript<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oScript<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.定义回调函数</span>    window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 删除已经获取了数据的script标签</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>oScript<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 将获取到的数据返回给外界</span>        options<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//调用自己定义的jsonp</span><span class="token function">myJSONP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        url<span class="token punctuation">:</span> <span class="token string">"http://127.0.0.1:80/jQuery/Ajax/jsonp.php"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"wst"</span><span class="token punctuation">,</span>            <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">21</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        jsonp<span class="token punctuation">:</span> <span class="token string">"cb"</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// 告诉jQuery服务器在获取回调函数名称的时候需要用什么key来获取</span>        jsonpCallback<span class="token punctuation">:</span> <span class="token string">"wst"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 告诉jQuery服务器在获取回调函数名称的时候回调函数的名称是什么</span>        success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux安装插件系列】Linux安装配置tomcat9.0</title>
      <link href="/2021/102136523.html"/>
      <url>/2021/102136523.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Linux服务器上安装tomcat"><a href="#Linux服务器上安装tomcat" class="headerlink" title="Linux服务器上安装tomcat"></a>Linux服务器上安装tomcat</h1><p> 安装软件 ： apache-tomcat-9.0.0.M1.tar.gz（下载地址<a href="http://tomcat.apache.org/%EF%BC%89" target="_blank" rel="noopener">http://tomcat.apache.org/）</a></p><h3 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h3><p>　　Tomcat是其中一个开源的且免费的java Web服务器，是Apache软件基金会的项目，所以安装Tomcat之前要安装java JDk，请参照<a href="https://409713427.github.io/2021/102036523.html">Linux安装jdk1.8</a></p><h3 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h3><p>　　下载Tomcat9</p><p>​    <a href="https://imgtu.com/i/5Bwrp6" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5Bwrp6.jpg" alt="5Bwrp6.jpg"></a></p><pre class=" language-bash"><code class="language-bash">将文件移动到apache-tomcat-9.0.0.M1.tar.gz移动到/usr/tomcat/下，并解压：</code></pre><p><a href="https://imgtu.com/i/5Bws1K" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5Bws1K.jpg" alt="5Bws1K.jpg"></a></p><pre class=" language-bash"><code class="language-bash">解压命令 <span class="token keyword">:</span> <span class="token function">tar</span> -xzvf apache-tomcat-10.0.12.tar.gz </code></pre><p>   <a href="https://imgtu.com/i/5Bw0t1" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5Bw0t1.jpg" alt="5Bw0t1.jpg"></a></p><p>并修改文件名</p><pre class=" language-bash"><code class="language-bash"><span class="token function">mv</span> apache-tomcat-10.0.12 apache-tomcat-10.0.12-8082</code></pre><p>　　再次解压apache-tomcat-10.0.12.tar.gz 文件，并修改解压后的文件价名为apache-tomcat-10.0.12-8082，得到　</p><p>​    <a href="https://imgtu.com/i/5BwBfx" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BwBfx.jpg" alt="5BwBfx.jpg"></a></p><h3 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h3><p>　　修改端口，分别修改tomcat里面conf/server.xml</p><p>server.xml文件中有三个端口设置</p><p>　　</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>Server port<span class="token operator">=</span><span class="token string">"8005"</span> shutdown<span class="token operator">=</span><span class="token string">"SHUTDOWN"</span><span class="token operator">></span> ：关闭时使用　　<span class="token operator">&lt;</span>Connector port<span class="token operator">=</span><span class="token string">"8080"</span> protocol<span class="token operator">=</span><span class="token string">"HTTP/1.1"</span> connectionTimeout<span class="token operator">=</span><span class="token string">"20000"</span> redirectPort<span class="token operator">=</span><span class="token string">"8443"</span> /<span class="token operator">></span> ： 一般应用使用　　<span class="token operator">&lt;</span>Connector port<span class="token operator">=</span><span class="token string">"8009"</span> protocol<span class="token operator">=</span><span class="token string">"AJP/1.3"</span> redirectPort<span class="token operator">=</span><span class="token string">"8443"</span> /<span class="token operator">></span>：为AJP端口，即容器使用，如 APACHE能通过AJP协议访问Tomcat的8009端口</code></pre><p>　　第一个80的tomcat的三个端口分别修改为：8005/80/8009</p><p>　　第二个8082的tomcat的三个端口分别修改为：7082/8082/9082</p><h3 id="步骤四"><a href="#步骤四" class="headerlink" title="步骤四"></a>步骤四</h3><p>　　启动tomcat，分别进入tomcat里面的bin目录</p><p>　　执行： ./startup.sh  –&gt;启动tomcat</p><p>　　执行： ./shutdown.sh –&gt;关闭tomcat</p><p>　　浏览器中输入：<a href="http://localhost:8080/" target="_blank" rel="noopener">http://ip:80</a> 和<a href="http://localhost:8090/" target="_blank" rel="noopener">http://</a><a href="http://localhost:8080/" target="_blank" rel="noopener">ip</a><a href="http://localhost:8090/" target="_blank" rel="noopener">:80</a>82（ip指服务器的IP地址），即可访问不同的tomcat</p><p><a href="https://imgtu.com/i/5B0dKS" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5B0dKS.jpg" alt="5B0dKS.jpg"></a></p><p><a href="https://imgtu.com/i/5BBCGt" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BBCGt.jpg" alt="5BBCGt.jpg"></a></p><h3 id="步骤五"><a href="#步骤五" class="headerlink" title="步骤五"></a>步骤五</h3><p>　　设置tomcat开机启动</p><p>　　1、找到/etc文件夹下的rc.local文件（有的是在/etc/rc.d文件夹下），在文件的最后添加以下java环境变量和启动tomcat命令：</p><p>　</p><pre class=" language-bash"><code class="language-bash">　<span class="token function">export</span> JAVA_HOME<span class="token operator">=</span>/home/wst/jdk1.8  <span class="token function">export</span> JRE_HOME<span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre　sh /home/wst/Documents/tomcat10/apache-tomcat-10.0.12-80/bin/startup.sh（启动命令，可以配置条）</code></pre><p> <img src="https://img2018.cnblogs.com/blog/997648/201810/997648-20181011102318788-1124306211.png" alt="img"></p><p><a href="https://imgtu.com/i/5BwwkR" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BwwkR.jpg" alt="5BwwkR.jpg"></a></p><p>　保存退出 :wq</p><p>　　2、给rc.local文件添加执行权限</p><pre class=" language-bash"><code class="language-bash">　<span class="token function">chmod</span> +x rc.local</code></pre><p>　　 3、重启服务器，即可访问Tomcat</p><pre class=" language-bash"><code class="language-bash"><span class="token function">reboot</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux安装插件系列】Linux安装配置jdk1.8</title>
      <link href="/2021/101936523.html"/>
      <url>/2021/101936523.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Linux安装jdk1-8"><a href="#Linux安装jdk1-8" class="headerlink" title="Linux安装jdk1.8"></a>Linux安装jdk1.8</h1><p>第一次再Linux安装jdk并且配置环境,为了以后查看,在这里记录一下.</p><p>linux 下安装jdk和windows下的安装是一样的，之前在windows安装的时候是先下载压缩包，然后再配置环境变量。其实在linux下也是一样的。</p><h3 id="第一步：创建jdk安装目录-该-usr-local-src-目录是空的-最好把我们自己下载的放到这-容易区分"><a href="#第一步：创建jdk安装目录-该-usr-local-src-目录是空的-最好把我们自己下载的放到这-容易区分" class="headerlink" title="第一步：创建jdk安装目录(该/usr/local/src 目录是空的,最好把我们自己下载的放到这,容易区分)"></a>第一步：创建jdk安装目录(该/usr/local/src 目录是空的,最好把我们自己下载的放到这,容易区分)</h3><pre class=" language-bash"><code class="language-bash">命令： <span class="token function">mkdir</span> -p /usr/local/src/jdk</code></pre><h3 id="第二步：查看安装程序"><a href="#第二步：查看安装程序" class="headerlink" title="第二步：查看安装程序"></a>第二步：查看安装程序</h3><pre class=" language-bash"><code class="language-bash">命令：rpm -qa <span class="token operator">|</span> <span class="token function">grep</span> -i jdk</code></pre><p>　　 若之前安装过jdk，下次安装一定把之前的删除干净</p><h3 id="第三步：下载jdk包需要联网，下载也需要点时间）"><a href="#第三步：下载jdk包需要联网，下载也需要点时间）" class="headerlink" title="第三步：下载jdk包需要联网，下载也需要点时间）"></a>第三步：下载jdk包需要联网，下载也需要点时间）</h3><p>此次使用的为后缀为tar.gz的文件（不需要安装），如jdk-8u131-linux-x64.tar.gz</p><pre class=" language-bash"><code class="language-bash">安装指令: <span class="token punctuation">[</span>root@master wst<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" </span> http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz</code></pre><p>注意：如果上面wget命令不能用,报错：-bash: wget: command not found。执行一下该命令(安装依赖包) yum -y install wget</p><p>   　　  注意 : 记住需要加上：–no-check-certificate –no-cookies –header “Cookie: oraclelicense=accept-securebackup-cookie”    这段是为了避开用户验证用的</p><h3 id="第四步：解压"><a href="#第四步：解压" class="headerlink" title="第四步：解压"></a>第四步：解压</h3><pre class=" language-bash"><code class="language-bash">解压命令 <span class="token keyword">:</span> <span class="token function">tar</span> -zxvf jdk-8u131-linux-x64.tar.gz</code></pre><p>  　　    系统会生成一个名为：jdk1.8.0_131 的文件夹。可以使用mv命令自定义文件名。</p><pre class=" language-bash"><code class="language-bash">更改文件夹名称 <span class="token keyword">:</span> <span class="token function">mv</span> jdk1.8.0_131  jdk1.8</code></pre><p><a href="https://imgtu.com/i/5BQqiQ" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BQqiQ.png" alt="5BQqiQ.png"></a></p><p> 　　第五步：配置环境变量</p><pre class=" language-bash"><code class="language-bash">　　 编辑配置文件: <span class="token function">vi</span> /etc/profile</code></pre><p>可以看到这个文件的内容，profile文件有点类似于windows系统里面的环境变量的配置，</p><p>　　  <strong>shift + g 定位到最后一行</strong></p><p>　　  <strong>这个时候按一下a或i键，进入编辑模式</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token function">export</span> JAVA_HOME<span class="token operator">=</span>/usr/local/src/jdk/jdk1.8<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">$PATH</span><span class="token keyword">:</span><span class="token variable">$JAVA_HOME</span>/bin<span class="token function">export</span> CLASSPATH<span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar</code></pre><p><a href="https://imgtu.com/i/5BQHIg" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BQHIg.jpg" alt="5BQHIg.jpg"></a></p><h3 id="第六步：退出文件，保存"><a href="#第六步：退出文件，保存" class="headerlink" title="第六步：退出文件，保存"></a>第六步：退出文件，保存</h3><p>​        按Esc键   输入:wq   保存并退出</p><h3 id="第七步：让配置文件生效"><a href="#第七步：让配置文件生效" class="headerlink" title="第七步：让配置文件生效"></a>第七步：让配置文件生效</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># source /etc/profile</span></code></pre><h3 id="第八步：查看是否配置成功"><a href="#第八步：查看是否配置成功" class="headerlink" title="第八步：查看是否配置成功"></a>第八步：查看是否配置成功</h3><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@master wst<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># java -version </span></code></pre><p>　　　　若出现jdk版本号，则安装并配置环境变量成功</p><p><a href="https://imgtu.com/i/5BQ7dS" target="_blank" rel="noopener"><img src="https://z3.ax1x.com/2021/10/20/5BQ7dS.jpg" alt="5BQ7dS.jpg"></a></p><p>​            如果提示命令找不到的话，查看一下jdk的配置路径是否错误。</p><p>   　　</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux安装插件系列】Linux安装配置mysql8.0</title>
      <link href="/2021/101536523.html"/>
      <url>/2021/101536523.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Linux-CentOS7安装mysql8-0"><a href="#Linux-CentOS7安装mysql8-0" class="headerlink" title="Linux-CentOS7安装mysql8.0"></a>Linux-CentOS7安装mysql8.0</h1><p>密码策略： <a href="https://blog.csdn.net/Hello_World_QWP/article/details/79551789" target="_blank" rel="noopener">https://blog.csdn.net/Hello_World_QWP/article/details/79551789</a></p><h3 id="CentOS7安装mysql8-0步骤"><a href="#CentOS7安装mysql8-0步骤" class="headerlink" title="CentOS7安装mysql8.0步骤"></a>CentOS7安装mysql8.0步骤</h3><p>1.1 安装前清理工作,第一次安装请忽略；<br> 1.1.1 清理原有的mysql数据库；<br> 使用以下命令查找出安装的mysql软件包和依赖包：</p><pre class=" language-undefined"><code class="language-undefined">rpm -pa | grep mysql</code></pre><p>显示结果如下：</p><pre class=" language-css"><code class="language-css">mysql<span class="token number">80</span>-community-release-el<span class="token number">7</span>-<span class="token number">1.</span>noarchmysql-community-server-<span class="token number">8.0.11</span>-<span class="token number">1.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span>mysql-community-common-<span class="token number">8.0.11</span>-<span class="token number">1.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span>mysql-community-libs-<span class="token number">8.0.11</span>-<span class="token number">1.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span>mysql-community-client-<span class="token number">8.0.11</span>-<span class="token number">1.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span>使用以下命令依次删除上面的程序yum remove mysql-xxx-xxx-</code></pre><p>删除mysql的配置文件，卸载不会自动删除配置文件，首先使用如下命令查找出所用的配置文件；</p><pre class=" language-swift"><code class="language-swift"><span class="token builtin">find</span> <span class="token operator">/</span> <span class="token operator">-</span>name mysql</code></pre><p>可能的显示结果如下：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token operator">/</span>etc<span class="token operator">/</span>logrotate<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql<span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>targeted<span class="token operator">/</span>active<span class="token operator">/</span>modules<span class="token operator">/</span><span class="token number">100</span><span class="token operator">/</span>mysql<span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>targeted<span class="token operator">/</span>tmp<span class="token operator">/</span>modules<span class="token operator">/</span><span class="token number">100</span><span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>mysql<span class="token operator">/</span>usr<span class="token operator">/</span>lib64<span class="token operator">/</span>mysql<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql</code></pre><p>根据需求使用以下命令 依次 对配置文件进行删除</p><pre class=" language-csharp"><code class="language-csharp">rm <span class="token operator">-</span>rf <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql</code></pre><h3 id="1-1-2-删除MariaDB的文件，"><a href="#1-1-2-删除MariaDB的文件，" class="headerlink" title="1.1.2 删除MariaDB的文件，"></a>1.1.2 删除MariaDB的文件，</h3><p>由于MySQL在CentOS7中收费了，所以已经不支持MySQL了，取而代之在CentOS7内部集成了mariadb，而安装MySQL的话会和MariaDB的文件冲突，所以需要先卸载掉MariaDB.</p><p>使用rpm 命令查找出要删除的mariadb文件；</p><pre class=" language-bash"><code class="language-bash">rpm -pa <span class="token operator">|</span> <span class="token function">grep</span> mariadb可能的显示结果如下：mariadb-libs-5.5.56-2.el7.x86_64  rpm -e mariadb-libs-5.5.56-2.el7.x86_64 <span class="token comment" spellcheck="true">#删除上面的程序</span></code></pre><p>可能出现错误提示如下：</p><p>依赖检测失败：</p><pre class=" language-css"><code class="language-css">libmysqlclient<span class="token number">.</span>so<span class="token number">.18</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">64</span>bit<span class="token punctuation">)</span> 被 <span class="token punctuation">(</span>已安裝<span class="token punctuation">)</span> <span class="token property">postfix-2</span><span class="token punctuation">:</span><span class="token number">2.10.1</span>-<span class="token number">6.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span> 需要libmysqlclient<span class="token number">.</span>so<span class="token number">.18</span><span class="token punctuation">(</span>libmysqlclient_<span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">64</span>bit<span class="token punctuation">)</span> 被 <span class="token punctuation">(</span>已安裝<span class="token punctuation">)</span> <span class="token property">postfix-2</span><span class="token punctuation">:</span><span class="token number">2.10.1</span>-<span class="token number">6.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span> 需要libmysqlclient<span class="token number">.</span>so<span class="token number">.18</span><span class="token punctuation">(</span>libmysqlclient_<span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">64</span>bit<span class="token punctuation">)</span> 被 <span class="token punctuation">(</span>已安裝<span class="token punctuation">)</span> <span class="token property">postfix-2</span><span class="token punctuation">:</span><span class="token number">2.10.1</span>-<span class="token number">6.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span> 需要</code></pre><p>使用强制删除：</p><pre class=" language-css"><code class="language-css">rpm -e --nodeps mariadb-libs-<span class="token number">5.5.56</span>-<span class="token number">2.</span>el<span class="token number">7.</span>x<span class="token number">86</span>_<span class="token number">64</span></code></pre><p>至此就将原来有的mysql 和mariadb数据库删除了；</p><h1 id="1-2-安装mysql"><a href="#1-2-安装mysql" class="headerlink" title="1.2 安装mysql"></a>1.2 安装mysql</h1><p>1.2.1 下面mysql官网提供的mysql repo源<br> centos的yum 源中默认是没有mysql的，所以我们需要先去官网下载mysql的repo源并安装；</p><p>mysql官网下载链接：mysql repo下载地址 如下：<a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/</a></p><h3 id="1-2-2-下载软件包rpm文件"><a href="#1-2-2-下载软件包rpm文件" class="headerlink" title="1.2.2 下载软件包rpm文件"></a>1.2.2 下载软件包rpm文件</h3><p>文件下载到home/wst/Documents/mysql8.0文件夹下；</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> home/wst/Documents<span class="token function">mkdir</span> mysql8.0<span class="token function">cd</span> mysql8.0<span class="token function">wget</span>  https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm</code></pre><h3 id="1-2-3-安装-yum-repo文件并更新-yum-缓存；"><a href="#1-2-3-安装-yum-repo文件并更新-yum-缓存；" class="headerlink" title="1.2.3 安装 yum repo文件并更新 yum 缓存；"></a>1.2.3 安装 yum repo文件并更新 yum 缓存；</h3><pre class=" language-css"><code class="language-css">rpm -ivh mysql<span class="token number">80</span>-community-release-el<span class="token number">7</span>-<span class="token number">1.</span>noarch<span class="token number">.</span>rpm</code></pre><p>执行结果：</p><p>会在/etc/yum.repos.d/目录下生成两个repo文件mysql-community.repo mysql-community-source.repo</p><p>更新 yum 命令</p><pre class=" language-undefined"><code class="language-undefined">yum clean allyum makecache</code></pre><h3 id="1-2-4-使用-yum安装mysql"><a href="#1-2-4-使用-yum安装mysql" class="headerlink" title="1.2.4 使用 yum安装mysql"></a>1.2.4 使用 yum安装mysql</h3><p>当我们在使用yum安装mysql时，yum默认会从yum仓库中安装mysql最新的GA版本；如何选择自己的版本；</p><p>第一步： 查看mysql yum仓库中mysql版本，使用如下命令</p><pre class=" language-undefined"><code class="language-undefined">yum repolist all | grep mysql</code></pre><p>可以看到 MySQL 5.5 5.6 5.7为禁用状态 而MySQL 8.0为启用状态；</p><p>第二步 使用 yum-config-manager 命令修改相应的版本为启用状态最新版本为禁用状态，根据需要安装的版本修改</p><pre class=" language-bash"><code class="language-bash">yum-config-manager --disable mysql80-community <span class="token comment" spellcheck="true">#关闭8.0版本</span>yum-config-manager --enable mysql57-community <span class="token comment" spellcheck="true">#开启5.7版本</span></code></pre><p>或者可以编辑 mysql repo文件，</p><pre class=" language-undefined"><code class="language-undefined">cat /etc/yum.repos.d/mysql-community.repo </code></pre><p>将相应版本下的enabled改成 1 即可；</p><h3 id="1-2-5-安装mysql-命令如下："><a href="#1-2-5-安装mysql-命令如下：" class="headerlink" title="1.2.5 安装mysql 命令如下："></a>1.2.5 安装mysql 命令如下：</h3><pre class=" language-undefined"><code class="language-undefined">yum install mysql-community-server</code></pre><h3 id="1-2-6-开启mysql-服务"><a href="#1-2-6-开启mysql-服务" class="headerlink" title="1.2.6 开启mysql 服务"></a>1.2.6 开启mysql 服务</h3><pre class=" language-css"><code class="language-css">systemctl start mysqld<span class="token number">.</span>service</code></pre><h3 id="1-2-7-获取初始密码登录mysql"><a href="#1-2-7-获取初始密码登录mysql" class="headerlink" title="1.2.7 获取初始密码登录mysql"></a>1.2.7 获取初始密码登录mysql</h3><p>mysql在安装后会创建一个root@locahost账户，并且把初始的密码放到了/var/log/mysqld.log文件中；</p><pre class=" language-cpp"><code class="language-cpp">cat <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>log <span class="token operator">|</span> grep password</code></pre><p>使用初始密码登录mysql</p><p>jKw)wB/&lt;X4?z</p><pre class=" language-bash"><code class="language-bash">mysql -u root -p  <span class="token comment" spellcheck="true">#会提示输入密码</span></code></pre><h3 id="修改初始密码："><a href="#修改初始密码：" class="headerlink" title="修改初始密码："></a>修改初始密码：</h3><pre class=" language-bash"><code class="language-bash">ALTER USER <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'MyNewPass4!'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">#注意位数和种类至少大+写+小写+符号+数字</span></code></pre><h3 id="忘记密码重置密码"><a href="#忘记密码重置密码" class="headerlink" title="忘记密码重置密码"></a>忘记密码重置密码</h3><p>[重置密码解决MySQL for Linux错误 ERROR 1045 (28000): Access denied for user ‘root‘@’localhost’ (using password: YES)]</p><pre class=" language-bash"><code class="language-bash">vim /etc/my.cnf <span class="token comment" spellcheck="true">#注：windows下修改的是my.ini</span>skip-grant-tables<span class="token comment" spellcheck="true"># 在[mysqld]后面任意一行添加skip-grant-tables用来跳过密码验证的过程;设置完密码记得删除</span>systemctl restart mysqld.service <span class="token comment" spellcheck="true">#重启mysql ，就可以免密码登陆了，然后进行修改密码</span></code></pre><h3 id="1-2-8-在防火墙中开启3306端口"><a href="#1-2-8-在防火墙中开启3306端口" class="headerlink" title="1.2.8 在防火墙中开启3306端口"></a>1.2.8 在防火墙中开启3306端口</h3><p>CentOS7默认使用的是firewall作为防火墙，我这里改为习惯常用的iptables防火墙</p><p>第一步：开启firewall3306端口防火墙</p><pre class=" language-csharp"><code class="language-csharp">firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span>list<span class="token operator">-</span>ports 查看所有打开的端口firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp <span class="token operator">--</span>permanent    开启一个端口，添加<span class="token operator">--</span>permanent永久生效，没有此参数重启后失效firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>permanent <span class="token operator">--</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp  开放端口<span class="token number">80</span>firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>permanent <span class="token operator">--</span><span class="token keyword">remove</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp   移除端口<span class="token number">80</span>firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>reload   重启防火墙，修改后重启防火墙生效</code></pre><p>第五步： 重启防火墙</p><pre class=" language-css"><code class="language-css">systemctl enable iptables<span class="token number">.</span>servicesystemctl start iptables<span class="token number">.</span>service</code></pre><p>1.2.9 将mysql 服务加入开机启动项，并启动mysql进程</p><pre class=" language-css"><code class="language-css">systemctl enable mysqld<span class="token number">.</span>servicesystemctl start mysqld<span class="token number">.</span>service</code></pre><p>常用mysql服务命令：</p><pre class=" language-csharp"><code class="language-csharp">mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p #登录mysqlquit #退出mysql systemctl start mysqld<span class="token punctuation">.</span>service  #启动mysqlsystemctl stop mysqld<span class="token punctuation">.</span>service #结束systemctl restart mysqld<span class="token punctuation">.</span>service #重启systemctl enable mysqld<span class="token punctuation">.</span>service #开机自启<span class="token keyword">select</span> <span class="token function">version</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> #查看mysql版本</code></pre><h1 id="2-1-开启mysql远程服务："><a href="#2-1-开启mysql远程服务：" class="headerlink" title="2.1 开启mysql远程服务："></a>2.1 开启mysql远程服务：</h1><p>外网 Navicat 连接 Mysql</p><h3 id="2-1-1-修改mysql数据库下的user表中host的值"><a href="#2-1-1-修改mysql数据库下的user表中host的值" class="headerlink" title="2.1.1 修改mysql数据库下的user表中host的值"></a>2.1.1 修改mysql数据库下的user表中host的值</h3><p>可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”登录mysql数据库 执行如下命令：</p><pre class=" language-bash"><code class="language-bash">mysql -u root -puse mysql<span class="token punctuation">;</span>update user <span class="token keyword">set</span> host<span class="token operator">=</span><span class="token string">'%'</span> where user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span></code></pre><h3 id="2-1-2-使用授权的方式"><a href="#2-1-2-使用授权的方式" class="headerlink" title="2.1.2 使用授权的方式"></a>2.1.2 使用授权的方式</h3><p>赋予任何主机访问数据的权限</p><pre class=" language-rust"><code class="language-rust">mysql<span class="token operator">></span> GRANT ALL PRIVILEGES ON <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> TO <span class="token string">'root'</span><span class="token operator">@</span><span class="token string">'%'</span>WITH GRANT OPTION<span class="token punctuation">;</span>mysql<span class="token operator">></span>FLUSH PRIVILEGES</code></pre><p>如果想myuser用户使用mypassword密码从任何主机连接到mysql服务器的话。</p><pre class=" language-rust"><code class="language-rust">GRANT ALL PRIVILEGES ON <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> TO <span class="token string">'myuser'</span><span class="token operator">@</span><span class="token string">'%'</span>IDENTIFIED BY <span class="token string">'mypassword'</span> WITH GRANT OPTION<span class="token punctuation">;</span></code></pre><p>如果你想允许用户myuser从ip为192.168.1.6的主机连接到mysql服务器，并使用mypassword作为密码</p><pre class=" language-rust"><code class="language-rust">GRANT ALL PRIVILEGES ON <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> TO <span class="token string">'myuser'</span><span class="token operator">@</span><span class="token string">'192.168.1.3'</span>IDENTIFIED BY <span class="token string">'mypassword'</span> WITH GRANT OPTION<span class="token punctuation">;</span></code></pre><h3 id="2-2-在使用-Navicat-for-Mysql连接mysql-8-0时会报如下错误："><a href="#2-2-在使用-Navicat-for-Mysql连接mysql-8-0时会报如下错误：" class="headerlink" title="2.2 在使用 Navicat for Mysql连接mysql 8.0时会报如下错误："></a>2.2 在使用 Navicat for Mysql连接mysql 8.0时会报如下错误：</h3><p>Authentication plugin ‘caching_sha2_password’ cannot be loaded:</p><p>mysql8.0 引入了新特性 caching_sha2_password；这种密码加密方式客户端不支持；客户端支持的是mysql_native_password 这种加密方式；</p><p>我们可可以查看mysql 数据库中user表的 plugin字段；</p><p>可以使用命令将他修改成mysql_native_password加密模式：</p><pre class=" language-bash"><code class="language-bash">update user <span class="token keyword">set</span> plugin<span class="token operator">=</span><span class="token string">'mysql_native_password'</span> where user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span></code></pre><p>再用Navicat链接 就可以链接成功；</p><hr><p>安装过程中涉及到的Linux命令学习；<br> 3.1 rpm</p><p>3.2 putty 上传文件 pscp命令；</p><pre class=" language-dart"><code class="language-dart">在window机上CD进入pttty安装目录：</code></pre><pre class=" language-bash"><code class="language-bash">    <span class="token function">cd</span> :\program files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span>\Putty</code></pre><pre class=" language-dart"><code class="language-dart">将本地文件拷贝到Linux上：pscp 文件 用户名<span class="token metadata symbol">@LinuxIP</span><span class="token punctuation">:</span>目录</code></pre><pre class=" language-ruby"><code class="language-ruby">    pscp hello<span class="token punctuation">.</span>txt root@<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">145.135</span><span class="token punctuation">:</span><span class="token operator">/</span>tmp<span class="token regex">/userfile/</span></code></pre><pre class=" language-dart"><code class="language-dart">将本地文件夹 拷贝到Linux上：pscp  <span class="token operator">-</span>r 目录 用户名<span class="token metadata symbol">@LinuxIP</span><span class="token punctuation">:</span>目录</code></pre><pre class=" language-ruby"><code class="language-ruby">   pscp <span class="token operator">-</span>r c<span class="token punctuation">:</span>\file root@<span class="token number">10.43</span><span class="token punctuation">.</span><span class="token number">65.98</span><span class="token punctuation">:</span><span class="token operator">/</span>root<span class="token operator">/</span>testFolder  </code></pre><pre class=" language-css"><code class="language-css">将Linux上的文件\root\test<span class="token number">.</span>txt拷贝到本地C盘src文件夹，如下：</code></pre><pre class=" language-ruby"><code class="language-ruby">   pscp root<span class="token variable">@abc_pc</span><span class="token punctuation">:</span><span class="token operator">/</span>root<span class="token operator">/</span>test<span class="token punctuation">.</span>txt  <span class="token constant">C</span><span class="token punctuation">:</span>\src  </code></pre><p>3.3 修改防火墙文件/etc/sysconfig/iptables</p><p>3.4 systemctl命令</p><p>授权外网登陆<br> 1。 改表法。</p><p>可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改成”%”</p><p>Sql代码</p><pre class=" language-csharp"><code class="language-csharp">  <span class="token number">1</span><span class="token punctuation">.</span> mysql <span class="token operator">-</span>u root <span class="token operator">-</span>pvmwaremysql<span class="token operator">></span>use mysql<span class="token punctuation">;</span>    <span class="token number">2</span><span class="token punctuation">.</span> mysql<span class="token operator">></span>update user <span class="token keyword">set</span> host <span class="token operator">=</span> <span class="token string">'%'</span> <span class="token keyword">where</span> user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>    <span class="token number">3</span><span class="token punctuation">.</span> mysql<span class="token operator">></span><span class="token keyword">select</span> host<span class="token punctuation">,</span> user <span class="token keyword">from</span> user<span class="token punctuation">;</span> </code></pre><ol><li>授权法。</li></ol><p>例如，你想myuser使用mypassword从任何主机连接到mysql服务器的话。</p><p>Sql代码</p><pre class=" language-bash"><code class="language-bash">GRANT ALL PRIVILEGES ON *.* TO <span class="token string">'myuser'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'mypassword'</span> WITHGRANT OPTION<span class="token punctuation">;</span>  FLUSH   PRIVILEGES<span class="token punctuation">;</span> </code></pre><p>如果你想允许用户myuser从ip为192.168.1.6的主机连接到mysql服务器的dk数据库，并使用mypassword作为密码</p><p>Sql代码</p><pre class=" language-bash"><code class="language-bash">GRANT ALL PRIVILEGES ON dk.* TO <span class="token string">'myuser'</span>@<span class="token string">'192.168.1.3'</span> IDENTIFIED BY <span class="token string">'mypassword'</span> WITH GRANT OPTION<span class="token punctuation">;</span> FLUSH   PRIVILEGES<span class="token punctuation">;</span> </code></pre><p>注意授权后必须FLUSH PRIVILEGES;否则无法立即生效。</p><p>3<br> 另外一种方法.</p><p>在安装mysql的机器上运行：</p><pre class=" language-undefined"><code class="language-undefined">1、d:\mysql\bin\>mysql -h localhost -u root </code></pre><p>//这样应该可以进入MySQL服务器</p><pre class=" language-bash"><code class="language-bash">2、mysql<span class="token operator">></span>GRANT ALL PRIVILEGES ON *.* TO <span class="token string">'root'</span>@<span class="token string">'%'</span> WITH GRANT OPTION </code></pre><p>//赋予任何主机访问数据的权限</p><pre class=" language-undefined"><code class="language-undefined">3、mysql>FLUSH PRIVILEGES </code></pre><p>//修改生效</p><pre class=" language-php"><code class="language-php"><span class="token number">4</span>、mysql<span class="token operator">></span><span class="token constant">EXIT</span> </code></pre><p>//退出MySQL服务器</p><p>这样就可以在其它任何的主机上以root身份登录啦！</p><p>其它：</p><pre class=" language-csharp"><code class="language-csharp">mysql<span class="token operator">></span> grant all privileges on <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> to <span class="token string">'energy_pf'</span><span class="token string">@'192.168.2.65'</span> identified by <span class="token string">'energy_pf'</span> with grant option<span class="token punctuation">;</span></code></pre><p>Query OK, 0 rows affected (0.00 sec)</p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span> plush privileges<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#立即生效</span></code></pre><p>允许用户energy_pf从ip为192.168.2.65的主机连接到mysql服务器的任意数据库（*.*），并使用energy_pf作为密码</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java基础【抽象类，接口、代码块、final、单例、枚举】</title>
      <link href="/2021/091936523.html"/>
      <url>/2021/091936523.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="java基础【抽象类，接口、代码块、final、单例、枚举】"><a href="#java基础【抽象类，接口、代码块、final、单例、枚举】" class="headerlink" title="java基础【抽象类，接口、代码块、final、单例、枚举】"></a>java基础【抽象类，接口、代码块、final、单例、枚举】</h1><h1 id="第一章-抽象类"><a href="#第一章-抽象类" class="headerlink" title="第一章 抽象类"></a>第一章 抽象类</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><h3 id="1-1-1-抽象类引入"><a href="#1-1-1-抽象类引入" class="headerlink" title="1.1.1 抽象类引入"></a>1.1.1 抽象类引入</h3><p>父类中的方法，被它的子类们重写，子类各自的实现都不尽相同。那么父类的方法声明和方法主体，只有声明还有意义，而方法主体则没有存在的意义了(因为子类对象会调用自己重写的方法)。换句话说，父类可能知道子类应该有哪个功能，但是功能具体怎么实现父类是不清楚的（由子类自己决定），父类完全只需要提供一个没有方法体的方法签名即可，具体实现交给子类自己去实现。<strong>我们把没有方法体的方法称为抽象方法。Java语法规定，包含抽象方法的类就是抽象类</strong>。</p><ul><li><strong>抽象方法</strong> ： 没有方法体的方法。</li><li><strong>抽象类</strong>：包含抽象方法的类。</li></ul><h2 id="1-2-abstract使用格式"><a href="#1-2-abstract使用格式" class="headerlink" title="1.2 abstract使用格式"></a>1.2 abstract使用格式</h2><p><strong>abstract是抽象的意思，用于修饰方法方法和类，修饰的方法是抽象方法，修饰的类是抽象类。</strong></p><h3 id="1-2-1-抽象方法"><a href="#1-2-1-抽象方法" class="headerlink" title="1.2.1 抽象方法"></a>1.2.1 抽象方法</h3><p>使用<code>abstract</code> 关键字修饰方法，该方法就成了抽象方法，抽象方法只包含一个方法名，而没有方法体。</p><p>定义格式：</p><pre class=" language-java"><code class="language-java">修饰符 <span class="token keyword">abstract</span> 返回值类型 方法名 <span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>；</code></pre><p>代码举例：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；</code></pre><h3 id="1-2-2-抽象类"><a href="#1-2-2-抽象类" class="headerlink" title="1.2.2 抽象类"></a>1.2.2 抽象类</h3><p>如果一个类包含抽象方法，那么该类必须是抽象类。<strong>注意：抽象类不一定有抽象方法，但是有抽象方法的类必须定义成抽象类。</strong></p><p>定义格式：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">abstract</span> <span class="token keyword">class</span> 类名字 <span class="token punctuation">{</span>   <span class="token punctuation">}</span></code></pre><p>代码举例：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；<span class="token punctuation">}</span></code></pre><h3 id="1-2-3-抽象类的使用"><a href="#1-2-3-抽象类的使用" class="headerlink" title="1.2.3 抽象类的使用"></a>1.2.3 抽象类的使用</h3><p><strong>要求</strong>：继承抽象类的子类<strong>必须重写父类所有的抽象方法</strong>。否则，该子类也必须声明为抽象类。</p><p>代码举例：</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 父类,抽象类</span><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token function">Employee</span><span class="token punctuation">(</span>String id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> <span class="token keyword">double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 抽象方法</span>    <span class="token comment" spellcheck="true">// 抽象方法必须要放在抽象类中</span>    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 定义一个子类继承抽象类</span><span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Manager</span><span class="token punctuation">(</span>String id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> <span class="token keyword">double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 2.重写父类的抽象方法</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"管理其他人"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 定义一个子类继承抽象类</span><span class="token keyword">class</span> <span class="token class-name">Cook</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">Cook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Cook</span><span class="token punctuation">(</span>String id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> <span class="token keyword">double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"厨师炒菜多加点盐..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 测试类</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo10</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 创建抽象类,抽象类不能创建对象</span>        <span class="token comment" spellcheck="true">// 假设抽象类让我们创建对象,里面的抽象方法没有方法体,无法执行.所以不让我们创建对象</span><span class="token comment" spellcheck="true">//        Employee e = new Employee();</span><span class="token comment" spellcheck="true">//        e.work();</span>                <span class="token comment" spellcheck="true">// 3.创建子类</span>        Manager m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        m<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Cook c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cook</span><span class="token punctuation">(</span><span class="token string">"ap002"</span><span class="token punctuation">,</span> <span class="token string">"库克"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>此时的方法重写，是子类对父类抽象方法的完成实现，我们将这种方法重写的操作，也叫做<strong>实现方法</strong>。</p><h2 id="1-3-抽象类的特征"><a href="#1-3-抽象类的特征" class="headerlink" title="1.3 抽象类的特征"></a>1.3 抽象类的特征</h2><p>抽象类的特征总结起来可以说是 <strong>有得有失</strong></p><p><strong>有得：抽象类得到了拥有抽象方法的能力。</strong></p><p><strong>有失：抽象类失去了创建对象的能力。</strong></p><p>其他成员（构造器，实例方法，静态方法等）抽象类都是具备的。</p><h2 id="1-4-抽象类的注意事项"><a href="#1-4-抽象类的注意事项" class="headerlink" title="1.4 抽象类的注意事项"></a>1.4 抽象类的注意事项</h2><p>关于抽象类的使用，以下为语法上要注意的细节，虽然条目较多，但若理解了抽象的本质，无需死记硬背。</p><ol><li><p>抽象类<strong>不能创建对象</strong>，如果创建，编译无法通过而报错。只能创建其非抽象子类的对象。</p><blockquote><p>理解：假设创建了抽象类的对象，调用抽象的方法，而抽象方法没有具体的方法体，没有意义。</p></blockquote></li><li><p>抽象类中，可以有构造器，是供子类创建对象时，初始化父类成员使用的。</p><blockquote><p>理解：子类的构造方法中，有默认的super()，需要访问父类构造方法。</p></blockquote></li><li><p>抽象类中，不一定包含抽象方法，但是有抽象方法的类必定是抽象类。</p><blockquote><p>理解：未包含抽象方法的抽象类，目的就是不想让调用者创建该类对象，通常用于某些特殊的类结构设计。</p></blockquote></li><li><p>抽象类的子类，必须重写抽象父类中<strong>所有的</strong>抽象方法，否则子类也必须定义成抽象类，编译无法通过而报错。 </p><blockquote><p>理解：假设不重写所有抽象方法，则类中可能包含抽象方法。那么创建对象后，调用抽象的方法，没有意义。</p></blockquote></li><li><p>抽象类存在的意义是为了被子类继承，抽象类体现的是模板思想。</p><blockquote><p>理解：抽象类中已经实现的是模板中确定的成员，抽象类不确定如何实现的定义成抽象方法，交给具体的子类去实现。</p></blockquote></li></ol><h2 id="1-5-抽象类存在的意义"><a href="#1-5-抽象类存在的意义" class="headerlink" title="1.5 抽象类存在的意义"></a>1.5 抽象类存在的意义</h2><p>抽象类存在的意义是为了被子类继承，否则抽象类将毫无意义，<strong>抽象类体现的是模板思想</strong>，模板是通用的东西抽象类中已经是具体的实现（抽象类中可以有成员变量和实现方法），而模板中不能决定的东西定义成抽象方法，让使用模板（继承抽象类的类）的类去重写抽象方法实现需求，这是典型的模板思想。</p><h2 id="1-6-第一个设计模式：模板模式"><a href="#1-6-第一个设计模式：模板模式" class="headerlink" title="1.6 第一个设计模式：模板模式"></a>1.6 第一个设计模式：模板模式</h2><p>我们现在使用抽象类设计一个模板模式的应用，例如在小学的时候，我们经常写作文，通常都是有模板可以套用的。假如我现在需要定义新司机和老司机类，新司机和老司机都有开车功能，开车的步骤都一样，只是驾驶时的姿势有点不同，<code>新司机:开门,点火,双手紧握方向盘,刹车,熄火</code>，<code>老司机:开门,点火,右手握方向盘左手抽烟,刹车,熄火</code>。我们可以将固定流程写到父类中，不同的地方就定义成抽象方法，让不同的子类去重写，代码如下:</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 司机开车的模板类</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Driver</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"开门"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"点火"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 开车姿势不确定?定义为抽象方法</span>        <span class="token function">ziShi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"刹车"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"熄火"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">ziShi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>现在定义两个使用模板的司机：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewDriver</span> <span class="token keyword">extends</span> <span class="token class-name">Driver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ziShi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"新司机双手紧握方向盘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OldDriver</span> <span class="token keyword">extends</span> <span class="token class-name">Driver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ziShi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"老司机右手握方向盘左手抽烟..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>编写测试类</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo02</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        NewDriver nd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NewDriver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        nd<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        OldDriver od <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OldDriver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        od<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>可以看出，模板模式的优势是，模板已经定义了通用架构，使用者只需要关心自己需要实现的功能即可！非常的强大！</strong></p><h1 id="第二章-接口"><a href="#第二章-接口" class="headerlink" title="第二章 接口"></a>第二章 接口</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><p>我们已经学完了抽象类，抽象类中可以用抽象方法，也可以有普通方法，已经构造器，成员变量等。那么什么是接口呢？<strong>接口是更加彻底的抽象，接口中全部是抽象方法。（JDK8之前），接口同样是不能创建对象的</strong>。</p><h2 id="2-2-定义格式"><a href="#2-2-定义格式" class="headerlink" title="2.2 定义格式"></a>2.2 定义格式</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//接口的定义格式：</span>修饰符 <span class="token keyword">interface</span> 接口名称<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 抽象方法</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 修饰符：public|缺省</span><span class="token comment" spellcheck="true">// 接口的声明：interface</span><span class="token comment" spellcheck="true">// 接口名称：首字母大写，满足“驼峰模式”</span></code></pre><h2 id="2-3-接口成分的特点"><a href="#2-3-接口成分的特点" class="headerlink" title="2.3 接口成分的特点"></a>2.3 接口成分的特点</h2><p>  在JDK8之前，接口中的成分包含：抽象方法和常量</p><h3 id="2-3-1-抽象方法"><a href="#2-3-1-抽象方法" class="headerlink" title="2.3.1.抽象方法"></a>2.3.1.抽象方法</h3><p>​       注意：接口中的抽象方法默认会自动加上public abstract修饰程序员无需自己手写！！<br>​       按照规范：以后接口中的抽象方法建议不要写上public abstract。因为没有必要啊，默认会加上。</p><h3 id="2-3-2-常量"><a href="#2-3-2-常量" class="headerlink" title="2.3.2 常量"></a>2.3.2 常量</h3><p> 在接口中定义的成员变量默认会加上： public static final修饰。也就是说在接口中定义的成员变量实际上是一个常量。这里是使用public static final修饰后，变量值就不可被修改，并且是静态化的变量可以直接用接口名访问，所以也叫常量。常量必须要给初始值。常量命名规范建议字母全部大写，多个单词用下划线连接。</p><h3 id="2-3-3-案例演示"><a href="#2-3-3-案例演示" class="headerlink" title="2.3.3 案例演示"></a>2.3.3 案例演示</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InterF</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 抽象方法！</span>    <span class="token comment" spellcheck="true">//    public abstract void run();</span>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//    public abstract String getName();</span>    String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//    public abstract int add(int a , int b);</span>    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 它的最终写法是：</span>    <span class="token comment" spellcheck="true">// public static final int AGE = 12 ;</span>    <span class="token keyword">int</span> AGE  <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//常量</span>    String SCHOOL_NAME <span class="token operator">=</span> <span class="token string">"黑马程序员"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="2-4-基本的实现"><a href="#2-4-基本的实现" class="headerlink" title="2.4 基本的实现"></a>2.4 基本的实现</h2><h3 id="2-4-1-实现接口的概述"><a href="#2-4-1-实现接口的概述" class="headerlink" title="2.4.1 实现接口的概述"></a>2.4.1 实现接口的概述</h3><p>类与接口的关系为实现关系，即<strong>类实现接口</strong>，该类可以称为接口的实现类，也可以称为接口的子类。实现的动作类似继承，格式相仿，只是关键字不同，实现使用 <code> implements</code>关键字。</p><h3 id="2-4-2-实现接口的格式"><a href="#2-4-2-实现接口的格式" class="headerlink" title="2.4.2 实现接口的格式"></a>2.4.2 实现接口的格式</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**接口的实现：    在Java中接口是被实现的，实现接口的类称为实现类。    实现类的格式:*/</span><span class="token punctuation">[</span>修饰符<span class="token punctuation">]</span> <span class="token keyword">class</span> 类名 <span class="token keyword">implements</span> 接口<span class="token number">1</span><span class="token punctuation">,</span>接口<span class="token number">2</span><span class="token punctuation">,</span>接口<span class="token number">3</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>从上面格式可以看出，接口是可以被多实现的。大家可以想一想为什么呢？</p><h3 id="2-4-3-类实现接口的要求和意义"><a href="#2-4-3-类实现接口的要求和意义" class="headerlink" title="2.4.3 类实现接口的要求和意义"></a>2.4.3 类实现接口的要求和意义</h3><ol><li>必须重写实现的全部接口中所有抽象方法。</li><li>如果一个类实现了接口，但是没有重写完全部接口的全部抽象方法，这个类也必须定义成抽象类。</li><li><strong>意义：接口体现的是一种规范，接口对实现类是一种强制性的约束，要么全部完成接口申明的功能，要么自己也定义成抽象类。这正是一种强制性的规范。</strong></li></ol><h3 id="2-4-4-类与接口基本实现案例"><a href="#2-4-4-类与接口基本实现案例" class="headerlink" title="2.4.4  类与接口基本实现案例"></a>2.4.4  类与接口基本实现案例</h3><p>假如我们定义一个运动员的<strong>接口</strong>（规范），代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**   接口：接口体现的是规范。 * */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SportMan</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 抽象方法，跑步。</span>    <span class="token keyword">void</span> <span class="token function">law</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 抽象方法，遵守法律。</span>    String <span class="token function">compittion</span><span class="token punctuation">(</span>String project<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 抽象方法，比赛。</span><span class="token punctuation">}</span></code></pre><p>接下来定义一个乒乓球运动员类，实现接口，实现接口的<strong>实现类</strong>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>_03接口的实现<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 接口的实现： *    在Java中接口是被实现的，实现接口的类称为实现类。 *    实现类的格式: *      [修饰符] class 类名 implements 接口1,接口2,接口3...{ * * *      } * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PingPongMan</span>  <span class="token keyword">implements</span> <span class="token class-name">SportMan</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"乒乓球运动员稍微跑一下！！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">law</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"乒乓球运动员守法！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">compittion</span><span class="token punctuation">(</span>String project<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"参加"</span><span class="token operator">+</span>project<span class="token operator">+</span><span class="token string">"得金牌！"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>测试代码</strong>：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMain</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 创建实现类对象。</span>        PingPongMan zjk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PingPongMan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        zjk<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        zjk<span class="token punctuation">.</span><span class="token function">law</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zjk<span class="token punctuation">.</span><span class="token function">compittion</span><span class="token punctuation">(</span><span class="token string">"全球乒乓球比赛"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="1-4-5-类与接口的多实现案例"><a href="#1-4-5-类与接口的多实现案例" class="headerlink" title="1.4.5 类与接口的多实现案例"></a>1.4.5 类与接口的多实现案例</h3><p><strong>类与接口之间的关系是多实现的，一个类可以同时实现多个接口。</strong></p><p>首先我们先定义两个接口，代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** 法律规范：接口*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Law</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">rule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** 这一个运动员的规范：接口*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SportMan</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>然后定义一个实现类：</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Java中接口是可以被多实现的： *    一个类可以实现多个接口: Law ,SportMan * * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JumpMan</span> <span class="token keyword">implements</span> <span class="token class-name">Law</span> <span class="token punctuation">,</span>SportMan <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"尊长守法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"训练跑步！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>从上面可以看出类与接口之间是可以多实现的，我们可以理解成实现多个规范，这是合理的。</p><h2 id="2-5-接口与接口的多继承"><a href="#2-5-接口与接口的多继承" class="headerlink" title="2.5 接口与接口的多继承"></a>2.5 接口与接口的多继承</h2><p>Java中，接口与接口之间是可以多继承的：也就是一个接口可以同时继承多个接口。大家一定要注意：</p><p><strong>类与接口是实现关系</strong></p><p><strong>接口与接口是继承关系</strong></p><p>接口继承接口就是把其他接口的抽象方法与本接口进行了合并。</p><p>案例演示：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Abc</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** 法律规范：接口*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Law</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">rule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token operator">*</span> <span class="token operator">*</span>  总结： <span class="token operator">*</span>     接口与类之间是多实现的。 <span class="token operator">*</span>     接口与接口之间是多继承的。 <span class="token operator">*</span> <span class="token operator">*</span><span class="token operator">/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SportMan</span> <span class="token keyword">extends</span> <span class="token class-name">Law</span> <span class="token punctuation">,</span> Abc <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="2-6-JDK-8之后的接口新增方法"><a href="#2-6-JDK-8之后的接口新增方法" class="headerlink" title="2.6 JDK 8之后的接口新增方法"></a>2.6 JDK 8之后的接口新增方法</h2><p>从JDK 8开始之后，接口不再纯洁了，接口中不再只是抽象方法，接口还可以有<strong>默认方法</strong>（也就是实例方法），和<strong>静态方法</strong>了，还包含了私有实例方法和私有静态方法</p><h3 id="2-6-1-含有默认方法和静态方法"><a href="#2-6-1-含有默认方法和静态方法" class="headerlink" title="2.6.1 含有默认方法和静态方法"></a>2.6.1 含有默认方法和静态方法</h3><p><strong>默认方法：使用 <code>default</code> 修饰，不可省略，供子类调用或者子类重写。</strong></p><p><strong>静态方法：使用 <code>static</code> 修饰，供接口直接调用。</strong></p><p>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InterFaceName</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 执行语句</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 执行语句    </span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-6-2-含有私有方法和私有静态方法"><a href="#2-6-2-含有私有方法和私有静态方法" class="headerlink" title="2.6.2 含有私有方法和私有静态方法"></a>2.6.2 含有私有方法和私有静态方法</h3><p>私有方法：使用 <code>private</code> 修饰，供接口中的默认方法或者静态方法调用。</p><p>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InterFaceName</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 执行语句</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-6-3-新增方法的使用"><a href="#2-6-3-新增方法的使用" class="headerlink" title="2.6.3 新增方法的使用"></a>2.6.3 新增方法的使用</h3><p><strong>默认方法和静态方法以及私有方法和私有静态方法</strong>，<strong>遵循面向对象的继承关系使用原则，实现类依然可以访问接口的非私有方法，对于接口中的非私有静态方法，可以直接通过接口名进行访问。</strong></p><p>重写默认方法注意（了解）:</p><ul><li><p>子接口重写默认方法时，default关键字可以保留。</p></li><li><p>实现类重写默认方法时，default关键字不可以保留。</p></li></ul><h2 id="2-7-实现多个接口使用注意事项"><a href="#2-7-实现多个接口使用注意事项" class="headerlink" title="2.7 实现多个接口使用注意事项"></a>2.7 实现多个接口使用注意事项</h2><h3 id="2-7-1-多个接口同名静态方法"><a href="#2-7-1-多个接口同名静态方法" class="headerlink" title="2.7.1 多个接口同名静态方法"></a>2.7.1 多个接口同名静态方法</h3><p>如果实现了多个接口，多个接口中存在同名的静态方法并不会冲突，原因是只能通过各自接口名访问静态方法。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">interface</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">implements</span>  <span class="token class-name">A</span> <span class="token punctuation">,</span> B<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        People<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        B<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// C.test(); // 编译出错</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-7-2-优先级的问题"><a href="#2-7-2-优先级的问题" class="headerlink" title="2.7.2 优先级的问题"></a>2.7.2 优先级的问题</h3><p>当一个类，既继承一个父类，又实现若干个接口时，父类中的成员方法与接口中的默认方法重名，子类就近选择执行父类的成员方法。代码如下：</p><p>定义接口：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AAAAAAAAAAAA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>定义父类：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DDDDDDDDDDDD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>定义子类：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">D</span> <span class="token keyword">implements</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// 未重写methodA方法</span><span class="token punctuation">}</span></code></pre><p>定义测试类：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        C c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span>输出结果<span class="token operator">:</span>DDDDDDDDDDDD</code></pre><h2 id="2-8-接口小结"><a href="#2-8-接口小结" class="headerlink" title="2.8 接口小结"></a>2.8 接口小结</h2><ul><li>接口中，无法定义成员变量，但是可以定义常量，其值不可以改变，默认使用public static final修饰。</li><li>接口中的方法全是抽象方法，默认会自动加上public abstract修饰</li><li>JDK 8开始，接口不再纯洁，支持静态方法，默认方法，私有方法。</li><li>接口中，没有构造器，<strong>不能创建对象</strong>。</li><li>类与接口是多实现的</li><li>接口与接口是多继承的</li><li>接口体现的规范。</li></ul><h1 id="第三章-代码块"><a href="#第三章-代码块" class="headerlink" title="第三章 代码块"></a>第三章 代码块</h1><h2 id="3-1-引入"><a href="#3-1-引入" class="headerlink" title="3.1 引入"></a>3.1 引入</h2><p>类的成分：<br>​    1.成员变量<br>​    2.构造器<br>​    3.成员方法<br>​    4.代码块<br>​    5.内部类</p><p>我们已经学完了成员变量，构造器，成员方法，接下来我们来介绍以下代码快，代码块按照有无static可以分为静态代码块和实例代码块。</p><h2 id="3-2-静态代码块"><a href="#3-2-静态代码块" class="headerlink" title="3.2 静态代码块"></a>3.2 静态代码块</h2><p><strong>静态代码块</strong><br>​         必须有static修饰，必须放在类下。与类一起加载执行。</p><p><strong>格式</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">static</span><span class="token punctuation">{</span>     <span class="token comment" spellcheck="true">// 执行代码</span><span class="token punctuation">}</span></code></pre><p><strong>特点</strong>：</p><ul><li>每次执行类，加载类的时候都会先执行静态代码块一次。</li><li>静态代码块是自动触发执行的，只要程序启动静态代码块就会先执行一次。</li><li>作用：在启动程序之前可以做资源的初始化，一般用于初始化静态资源。</li></ul><p><strong>案例演示</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaimaKuaiDemo01</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String sc_name <span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 1.静态代码块</span>    <span class="token keyword">static</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 初始化静态资源</span>        sc_name <span class="token operator">=</span> <span class="token string">"黑马程序员！"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态代码块执行！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"main方法执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sc_name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3-3-实例代码块"><a href="#3-3-实例代码块" class="headerlink" title="3.3 实例代码块"></a>3.3 实例代码块</h2><p><strong>实例代码块</strong><br>​         没有static修饰，必须放在类下。与对象初始化一起加载。</p><p><strong>格式</strong></p><pre class=" language-java"><code class="language-java"><span class="token punctuation">{</span>     <span class="token comment" spellcheck="true">// 执行代码</span><span class="token punctuation">}</span></code></pre><p><strong>特点</strong>：</p><ul><li>无static修饰。属于对象，与对象的创建一起执行的。</li><li>每次调用构造器初始化对象，实例代码块都要自动触发执行一次。</li><li>实例代码块实际上是提取到每一个构造器中去执行的。</li><li>作用：实例代码块用于初始化对象的资源。</li></ul><p><strong>案例演示</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaimaKuaiDemo02</span> <span class="token punctuation">{</span>       <span class="token keyword">private</span> String name <span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 实例代码块。 无static修饰。</span>    <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"实例代码块执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name <span class="token operator">=</span> <span class="token string">"dl"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 构造器</span>    <span class="token keyword">public</span> <span class="token function">DaimaKuaiDemo02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//System.out.println("实例代码块执行");</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 有参数构造器</span>    <span class="token keyword">public</span> <span class="token function">DaimaKuaiDemo02</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//System.out.println("实例代码块执行");</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 匿名对象，创建出来没有给变量。</span>        <span class="token keyword">new</span> <span class="token class-name">DaimaKuaiDemo02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">DaimaKuaiDemo02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">DaimaKuaiDemo02</span><span class="token punctuation">(</span><span class="token string">"xulei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 输出三次：实例代码块执行</span></code></pre><p>常用API</p><h1 id="第四章-final关键字"><a href="#第四章-final关键字" class="headerlink" title="第四章 final关键字"></a>第四章 final关键字</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><p>学习了继承后，我们知道，子类可以在父类的基础上改写父类内容，比如，方法重写。那么我们能不能随意的继承API中提供的类，改写其内容呢？显然这是不合适的。为了避免这种随意改写的情况，Java提供了<code>final</code> 关键字，用于修饰<strong>不可改变</strong>内容。</p><ul><li><strong>final</strong>：  不可改变，最终的含义。可以用于修饰类、方法和变量。<ul><li>类：被修饰的类，不能被继承。</li><li>方法：被修饰的方法，不能被重写。</li><li>变量：被修饰的变量，有且仅能被赋值一次。</li></ul></li></ul><h2 id="4-2-使用方式"><a href="#4-2-使用方式" class="headerlink" title="4.2 使用方式"></a>4.2 使用方式</h2><h3 id="4-2-1-修饰类"><a href="#4-2-1-修饰类" class="headerlink" title="4.2.1 修饰类"></a>4.2.1 修饰类</h3><p>final修饰的类，不能被继承。</p><p>格式如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">class</span> 类名 <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>代码:</p><pre class=" language-java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Fu</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// class Zi extends Fu {} // 报错,不能继承final的类</span></code></pre><p>查询API发现像 <code>public final class String</code> 、<code>public final class Math</code> 、<code>public final class Scanner</code> 等，很多我们学习过的类，都是被final修饰的，目的就是供我们使用，而不让我们所以改变其内容。</p><h3 id="4-2-2-修饰方法"><a href="#4-2-2-修饰方法" class="headerlink" title="4.2.2 修饰方法"></a>4.2.2 修饰方法</h3><p>final修饰的方法，不能被重写。<br>格式如下：</p><pre class=" language-java"><code class="language-java">修饰符 <span class="token keyword">final</span> 返回值类型 方法名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//方法体</span><span class="token punctuation">}</span></code></pre><p>代码: </p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Fu2</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Fu2 show1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Fu2 show2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Zi2</span> <span class="token keyword">extends</span> <span class="token class-name">Fu2</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//    @Override</span><span class="token comment" spellcheck="true">//    public void show1() {</span><span class="token comment" spellcheck="true">//        System.out.println("Zi2 show1");</span><span class="token comment" spellcheck="true">//    }</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Zi2 show2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4-2-3-修饰变量-局部变量"><a href="#4-2-3-修饰变量-局部变量" class="headerlink" title="4.2.3 修饰变量-局部变量"></a>4.2.3 修饰变量-局部变量</h3><ol><li><strong>局部变量——基本类型</strong><br>基本类型的局部变量，被final修饰后，只能赋值一次，不能再更改。代码如下：</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FinalDemo1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 声明变量，使用final修饰</span>        <span class="token keyword">final</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 第一次赋值 </span>        a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 第二次赋值</span>        a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 报错,不可重新赋值</span>        <span class="token comment" spellcheck="true">// 声明变量，直接赋值，使用final修饰</span>        <span class="token keyword">final</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 第二次赋值</span>        b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 报错,不可重新赋值</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>思考，如下两种写法，哪种可以通过编译？</p><p>写法1：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    c <span class="token operator">=</span> i<span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>写法2：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token keyword">int</span> c <span class="token operator">=</span> i<span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>根据 <code>final</code> 的定义，写法1报错！写法2，为什么通过编译呢？因为每次循环，都是一次新的变量c。这也是大家需要注意的地方。</p><h3 id="4-2-4-修饰变量-实例成员变量"><a href="#4-2-4-修饰变量-实例成员变量" class="headerlink" title="4.2.4 修饰变量-实例成员变量"></a>4.2.4 修饰变量-实例成员变量</h3><p>成员变量涉及到初始化的问题，初始化方式有显示初始化和构造器初始化，只能选择其中一个：</p><ul><li>显示初始化(在定义成员变量的时候立马赋值)；</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li><p>构造器初始化(在构造器中赋值一次)。</p><p><strong>注意：每个构造器中都要赋值一次！</strong></p></li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">int</span> num2<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//     this.num2 = 20;</span>    <span class="token punctuation">}</span>         <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//     this.num2 = 20;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>被final修饰的常量名称，一般都有书写规范，所有字母都<strong>大写</strong>。</p></blockquote><h1 id="第五章-单例设计模式"><a href="#第五章-单例设计模式" class="headerlink" title="第五章 单例设计模式"></a>第五章 单例设计模式</h1><p>正常情况下一个类可以创建多个对象</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 正常情况下一个类可以创建多个对象</span>    Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="5-1-单例设计模式的作用"><a href="#5-1-单例设计模式的作用" class="headerlink" title="5.1 单例设计模式的作用"></a>5.1 单例设计模式的作用</h2><p>单例模式，是一种常用的软件设计模式。通过单例模式可以保证系统中，应用该模式的这个类只有一个实例。即一个类只有一个对象实例。</p><h2 id="5-2-单例设计模式实现步骤"><a href="#5-2-单例设计模式实现步骤" class="headerlink" title="5.2 单例设计模式实现步骤"></a>5.2 单例设计模式实现步骤</h2><ol><li><p>将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</p></li><li><p>在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</p></li><li><p>定义一个静态方法返回这个唯一对象。</p></li></ol><h2 id="5-3-单例设计模式的类型"><a href="#5-3-单例设计模式的类型" class="headerlink" title="5.3 单例设计模式的类型"></a>5.3 单例设计模式的类型</h2><p>根据实例化对象的时机单例设计模式又分为以下两种:</p><ol><li><p>饿汉单例设计模式</p></li><li><p>懒汉单例设计模式</p></li></ol><h2 id="5-4-饿汉单例设计模式"><a href="#5-4-饿汉单例设计模式" class="headerlink" title="5.4 饿汉单例设计模式"></a>5.4 饿汉单例设计模式</h2><p>饿汉单例设计模式就是使用类的时候已经将对象创建完毕，不管以后会不会使用到该实例化对象，先创建了再说。很着急的样子，故被称为“饿汉模式”。</p><p>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 2.在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.定义一个静态方法返回这个唯一对象。</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="5-5-懒汉单例设计模式"><a href="#5-5-懒汉单例设计模式" class="headerlink" title="5.5 懒汉单例设计模式"></a>5.5 懒汉单例设计模式</h2><p>懒汉单例设计模式就是调用getInstance()方法时实例才被创建，先不急着实例化出对象，等要用的时候才例化出对象。不着急，故称为“懒汉模式”。</p><p>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 2.在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 3.定义一个静态方法返回这个唯一对象。要用的时候才例化出对象</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>注意：懒汉单例设计模式在多线程环境下可能会实例化出多个对象，不能保证单例的状态。我们在学习完多线程的时候还会再讲解如何解决这个问题。</p></blockquote><h2 id="5-6-小结"><a href="#5-6-小结" class="headerlink" title="5.6 小结"></a>5.6 小结</h2><p>单例模式可以保证系统中一个类只有一个对象实例。</p><p>实现单例模式的步骤：</p><ol><li>将构造方法私有化，使其不能在类的外部通过new关键字实例化该类对象。</li><li>在该类内部产生一个唯一的实例化对象，并且将其封装为private static类型的成员变量。</li><li>定义一个静态方法返回这个唯一对象。</li></ol><h1 id="第六章-枚举"><a href="#第六章-枚举" class="headerlink" title="第六章 枚举"></a>第六章 枚举</h1><h2 id="6-1-不使用枚举存在的问题"><a href="#6-1-不使用枚举存在的问题" class="headerlink" title="6.1 不使用枚举存在的问题"></a>6.1 不使用枚举存在的问题</h2><p>假设我们要定义一个人类，人类中包含姓名和性别。通常会将性别定义成字符串类型，效果如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 省略get/set/toString方法</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo01</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 因为性别是字符串,所以我们可以传入任意字符串</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>不使用枚举存在的问题：可以给性别传入任意的字符串，导致性别是非法的数据，不安全。</p><h2 id="6-2-枚举的作用与应用场景"><a href="#6-2-枚举的作用与应用场景" class="headerlink" title="6.2 枚举的作用与应用场景"></a>6.2 枚举的作用与应用场景</h2><p>枚举的作用：一个方法接收的参数是固定范围之内的时候，那么即可使用枚举。</p><h2 id="6-3-枚举的基本语法"><a href="#6-3-枚举的基本语法" class="headerlink" title="6.3 枚举的基本语法"></a>6.3 枚举的基本语法</h2><h3 id="6-3-1-枚举的概念"><a href="#6-3-1-枚举的概念" class="headerlink" title="6.3.1 枚举的概念"></a>6.3.1 枚举的概念</h3><p>枚举是一种特殊类。枚举是有固定实例个数的类型，我们可以把枚举理解成有固定个数实例的多例模式。</p><h3 id="6-3-2-定义枚举的格式"><a href="#6-3-2-定义枚举的格式" class="headerlink" title="6.3.2 定义枚举的格式"></a>6.3.2 定义枚举的格式</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">enum</span> 枚举名 <span class="token punctuation">{</span>    第一行都是罗列枚举实例<span class="token punctuation">,</span>这些枚举实例直接写大写名字即可。<span class="token punctuation">}</span></code></pre><h3 id="6-3-3-入门案例"><a href="#6-3-3-入门案例" class="headerlink" title="6.3.3 入门案例"></a>6.3.3 入门案例</h3><ol><li>定义枚举：BOY表示男，GIRL表示女</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">enum</span> Sex <span class="token punctuation">{</span>    BOY<span class="token punctuation">,</span> GIRL<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 男，女</span><span class="token punctuation">}</span></code></pre><ol start="2"><li>Perosn中的性别有String类型改为Sex枚举类型</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Sex sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> Sex sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 省略get/set/toString方法</span><span class="token punctuation">}</span></code></pre><ol start="3"><li>使用是只能传入枚举中的固定值</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo02</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> Sex<span class="token punctuation">.</span>BOY<span class="token punctuation">)</span><span class="token punctuation">;</span>        Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> Sex<span class="token punctuation">.</span>GIRL<span class="token punctuation">)</span><span class="token punctuation">;</span>        Person p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5-3-4-枚举的其他内容"><a href="#5-3-4-枚举的其他内容" class="headerlink" title="5.3.4 枚举的其他内容"></a>5.3.4 枚举的其他内容</h3><p>枚举的本质是一个类，我们刚才定义的Sex枚举最终效果如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">enum</span> Sex <span class="token punctuation">{</span>    BOY<span class="token punctuation">,</span> GIRL<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 男，女</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 枚举的本质是一个类，我们刚才定义的Sex枚举相当于下面的类</span><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">SEX</span> <span class="token keyword">extends</span> <span class="token class-name">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Enum</span><span class="token operator">&lt;</span>SEX<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> SEX BOY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SEX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> SEX GIRL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SEX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> SEX<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> SEX <span class="token function">valueOf</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>枚举的本质是一个类，所以枚举中还可以有成员变量，成员方法等。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> Sex <span class="token punctuation">{</span>    <span class="token function">BOY</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">GIRL</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"年龄是: "</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo03</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> Sex<span class="token punctuation">.</span>BOY<span class="token punctuation">)</span><span class="token punctuation">;</span>        Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> Sex<span class="token punctuation">.</span>GIRL<span class="token punctuation">)</span><span class="token punctuation">;</span>        Sex<span class="token punctuation">.</span>BOY<span class="token punctuation">.</span><span class="token function">showAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Sex<span class="token punctuation">.</span>GIRL<span class="token punctuation">.</span><span class="token function">showAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="6-4-应用场景"><a href="#6-4-应用场景" class="headerlink" title="6.4 应用场景"></a>6.4 应用场景</h2><h2 id="6-5-枚举的应用"><a href="#6-5-枚举的应用" class="headerlink" title="6.5 枚举的应用"></a>6.5 枚举的应用</h2><p><strong>枚举的作用：枚举通常可以用于做信息的分类，如性别，方向，季度等。</strong></p><p>枚举表示性别：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> Sex <span class="token punctuation">{</span>    MAIL<span class="token punctuation">,</span> FEMAIL<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>枚举表示方向：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> Orientation <span class="token punctuation">{</span>    UP<span class="token punctuation">,</span> RIGHT<span class="token punctuation">,</span> DOWN<span class="token punctuation">,</span> LEFT<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>枚举表示季度</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> Season <span class="token punctuation">{</span>    SPRING<span class="token punctuation">,</span> SUMMER<span class="token punctuation">,</span> AUTUMN<span class="token punctuation">,</span> WINTER<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="6-6-小结"><a href="#6-6-小结" class="headerlink" title="6.6 小结"></a>6.6 小结</h2><ul><li>枚举类在第一行罗列若干个枚举对象。（多例）</li><li>第一行都是常量，存储的是枚举类的对象。</li><li>枚举是不能在外部创建对象的，枚举的构造器默认是私有的。</li><li>枚举通常用于做信息的标志和分类。</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java基础 【继承，引用类型使用】</title>
      <link href="/2021/091736523.html"/>
      <url>/2021/091736523.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Java基础-【继承，引用类型使用】"><a href="#Java基础-【继承，引用类型使用】" class="headerlink" title="Java基础 【继承，引用类型使用】"></a>Java基础 【继承，引用类型使用】</h1><h2 id="第一章-继承"><a href="#第一章-继承" class="headerlink" title="第一章 继承"></a>第一章 继承</h2><h3 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h3><p>​        继承就是子类继承父类的<strong>属性</strong>和<strong>行为</strong>，使得子类对象可以直接具有与父类相同的属性、相同的行为。子类可以直接访问父类中的<strong>非私有</strong>的属性和行为</p><h3 id="1-2-继承的好处"><a href="#1-2-继承的好处" class="headerlink" title="1.2 继承的好处"></a>1.2 继承的好处</h3><pre><code>      1. 提高**代码的复用性**（减少代码冗余，相同代码重复利用）。      2. 使类与类之间产生了关系。</code></pre><h3 id="1-3-子类不能继承的内容"><a href="#1-3-子类不能继承的内容" class="headerlink" title="1.3 子类不能继承的内容"></a>1.3 子类不能继承的内容</h3><h4 id="1-3-1-引入"><a href="#1-3-1-引入" class="headerlink" title="1.3.1 引入"></a>1.3.1 引入</h4><p>并不是父类的所有内容都可以给子类继承的：</p><p><strong>子类不能继承父类的构造器，因为子类有自己的构造器。</strong></p><p><strong>值得注意的是子类可以继承父类的私有成员（成员变量，方法），只是子类无法直接访问而已，可以通过getter/setter方法访问父类的private成员变量。</strong></p><h4 id="1-3-2-演示代码"><a href="#1-3-2-演示代码" class="headerlink" title="1.3.2 演示代码"></a>1.3.2 演示代码</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo03</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Zi z <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Zi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        System.out.println(z.num2); // 私有的子类无法使用</span>        <span class="token comment" spellcheck="true">// 通过getter/setter方法访问父类的private成员变量</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">getNum2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        z<span class="token punctuation">.</span><span class="token function">show1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// z.show2(); // 私有的子类无法使用</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Fu</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"show1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"show2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> num2<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNum2</span><span class="token punctuation">(</span><span class="token keyword">int</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>num2 <span class="token operator">=</span> num2<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Zi</span> <span class="token keyword">extends</span> <span class="token class-name">Fu</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><blockquote><p>小贴士：父类中的成员变量是非私有的，子类中可以直接访问。若父类中的成员变量私有了，子类是不能直接访问的。通常编码时，我们遵循封装的原则，使用private修饰成员变量，那么如何访问父类的私有成员变量呢？对！可以在父类中提供公共的getXxx()方法和setXxx()方法。</p></blockquote><h3 id="1-4-方法重写"><a href="#1-4-方法重写" class="headerlink" title="1.4 方法重写"></a>1.4 方法重写</h3><h4 id="1-4-1-概念"><a href="#1-4-1-概念" class="headerlink" title="1.4.1 概念"></a>1.4.1 概念</h4><p><strong>方法重写</strong> ：子类中出现与父类一模一样的方法时（返回值类型，方法名和参数列表都相同），会出现覆盖效果，也称为重写或者复写。<strong>声明不变，重新实现</strong>。</p><h4 id="1-4-2使用场景与案例"><a href="#1-4-2使用场景与案例" class="headerlink" title="1.4.2使用场景与案例"></a>1.4.2使用场景与案例</h4><p>发生在子父类之间的关系。<br>子类继承了父类的方法，但是子类觉得父类的这方法不足以满足自己的需求，子类重新写了一个与父类同名的方法，以便覆盖父类的该方 法。</p><p>例如：我们定义了一个动物类代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span>  <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物跑的很快！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物都可以叫~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>然后定义一个猫类，猫可能认为父类cry()方法不能满足自己的需求</p><p>代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我们一起学猫叫，喵喵喵！喵的非常好听！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 创建子类对象</span>          Cat ddm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；        <span class="token comment" spellcheck="true">// 调用父类继承而来的方法</span>        ddm<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 调用子类重写的方法</span>          ddm<span class="token punctuation">.</span><span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="1-4-3-Override重写注解"><a href="#1-4-3-Override重写注解" class="headerlink" title="1.4.3 @Override重写注解"></a>1.4.3 @Override重写注解</h4><ul><li><p>@Override:注解，重写注解校验！</p></li><li><p>这个注解标记的方法，就说明这个方法必须是重写父类的方法，否则编译阶段报错。</p></li><li><p>建议重写都加上这个注解，一方面可以提高代码的可读性，一方面可以防止重写出错！</p><p>加上后的子类代码形式如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>     <span class="token comment" spellcheck="true">// 声明不变，重新实现</span>    <span class="token comment" spellcheck="true">// 方法名称与父类全部一样，只是方法体中的功能重写写了！</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我们一起学猫叫，喵喵喵！喵的非常好听！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ul><h4 id="1-4-4-注意事项"><a href="#1-4-4-注意事项" class="headerlink" title="1.4.4 注意事项"></a>1.4.4 注意事项</h4><ol><li>方法重写是发生在子父类之间的关系。</li><li>子类方法覆盖父类方法，必须要保证权限大于等于父类权限。</li><li>子类方法覆盖父类方法，返回值类型、函数名和参数列表都要一模一样。</li></ol><h3 id="1-5-this与super"><a href="#1-5-this与super" class="headerlink" title="1.5 this与super"></a>1.5 this与super</h3><ul><li><p><strong>子类的每个构造方法中均有默认的super()，调用父类的空参构造。手动调用父类构造会覆盖默认的super()。</strong></p></li><li><p><strong>super() 和 this() 都必须是在构造方法的第一行，所以不能同时出现。</strong></p></li><li><p><strong>super(..)和this(…)是根据参数去确定调用父类哪个构造器的。</strong></p></li><li><p>super(..)可以调用父类构造器初始化继承自父类的成员变量的数据。</p></li><li><p>this(..)可以调用本类中的其他构造器。</p></li></ul><h2 id="第二章-引用类型使用总结"><a href="#第二章-引用类型使用总结" class="headerlink" title="第二章 引用类型使用总结"></a>第二章 引用类型使用总结</h2><p>实际的开发中，引用类型的使用非常重要，也是非常普遍的。我们可以在理解基本类型的使用方式基础上，进一步去掌握引用类型的使用方式。基本类型可以作为成员变量、作为方法的参数、作为方法的返回值，那么当然引用类型也是可以的。在这我们使用两个例子 , 来学习一下。</p><h3 id="2-1-引用类型作为方法参数和返回值"><a href="#2-1-引用类型作为方法参数和返回值" class="headerlink" title="2.1 引用类型作为方法参数和返回值"></a>2.1 引用类型作为方法参数和返回值</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"吃饭"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">method</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           Person p <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">//引用类型作为方法参数,在前面笔记本案例中我们也使用了接口类型作为方法参数</span>  pubic <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span>Person p<span class="token punctuation">)</span><span class="token punctuation">{</span>       p<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">//引用类型作为返回值</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> Person <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-2-引用类型作为成员变量"><a href="#2-2-引用类型作为成员变量" class="headerlink" title="2.2 引用类型作为成员变量"></a>2.2 引用类型作为成员变量</h3><p>​    我们每个人(Person)都有一个身份证(IDCard) , 为了表示这种关系 , 就需要在Person中定义一个IDCard的成员变量。定义Person类时，代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    String name<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//姓名</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//年龄</span><span class="token punctuation">}</span></code></pre><p>​    使用使用<code>String</code> 类型表示姓名 , <code>int</code> 类型表示年龄。其实，<code>String</code>本身就是引用类型，我们往往忽略了它是引用类型。如果我们继续丰富这个类的定义，给<code>Person</code> 增加身份证号 , 身份证签发机关等属性，我们将如何编写呢？这时候就需要编写一个IDCard类了</p><p>定义IDCard(身份证)类，添加身份证号 , 签发地等属性：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">IDCard</span> <span class="token punctuation">{</span>    String idNum<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//身份证号</span>    String authority<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//签发地</span>        <span class="token comment" spellcheck="true">//getter和setter方法</span>      <span class="token comment" spellcheck="true">//...</span>            <span class="token comment" spellcheck="true">//toString方法</span>      <span class="token comment" spellcheck="true">//...</span><span class="token punctuation">}</span></code></pre><p>修改Person类：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    String name<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//姓名</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//年龄</span>    IDCard idCard<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//表示自己的身份证信息</span>    <span class="token comment" spellcheck="true">//name和age的getter、setter方法</span>    <span class="token comment" spellcheck="true">//...</span>    <span class="token keyword">public</span> IDCard <span class="token function">getIdCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> idCard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIdCard</span><span class="token punctuation">(</span>IDCard idCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>idCard <span class="token operator">=</span> idCard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">", idCard="</span> <span class="token operator">+</span> idCard <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>测试类：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//创建IDCard对象</span>        IDCard idCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IDCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置身份证号</span>        idCard<span class="token punctuation">.</span><span class="token function">setIdNum</span><span class="token punctuation">(</span><span class="token string">"110113201606066666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置签发地</span>        idCard<span class="token punctuation">.</span><span class="token function">setAuthority</span><span class="token punctuation">(</span><span class="token string">"北京市顺义区公安局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//创建Person对象</span>        Person p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置姓名</span>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"小顺子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置年龄</span>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置身份证信息</span>        p<span class="token punctuation">.</span><span class="token function">setIdCard</span><span class="token punctuation">(</span>idCard<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//打印小顺子的信息</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>输出结果<span class="token operator">:</span>Person<span class="token punctuation">{</span>name<span class="token operator">=</span><span class="token string">'小顺子'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> idCard<span class="token operator">=</span>IDCard<span class="token punctuation">{</span>idNum<span class="token operator">=</span><span class="token string">'110113201606066666'</span><span class="token punctuation">,</span> authority<span class="token operator">=</span><span class="token string">'北京市顺义区公安局'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的第一篇博客文章</title>
      <link href="/2021/091615650.html"/>
      <url>/2021/091615650.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="我的博客文章编写"><a href="#我的博客文章编写" class="headerlink" title="我的博客文章编写"></a>我的博客文章编写</h1><a id="more"></a><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>使用标题时候需要写#  </p><p> 这是第一个段落  </p><p> 这是第二个段落  </p><h2 id="区块引用"><a href="#区块引用" class="headerlink" title="区块引用"></a>区块引用</h2><blockquote><p>这是一段高亮显示  </p></blockquote><h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><p> <a href="www.baidu.com">百度</a></p><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><hr><hr>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/091516107.html"/>
      <url>/2021/091516107.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Hello-Hexo"><a href="#Hello-Hexo" class="headerlink" title="Hello Hexo"></a>Hello Hexo</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
